(()=>{"use strict";const{applyFilters:t}=JetPlugins.hooks,{ReactiveHook:s,InputData:e}=JetFormBuilderAbstract;function i(){e.call(this),this.maskOptions={},this.clearOnSubmit=!1,this.isSupported=function(t){return t.classList.contains("jet-form-builder__masked-field")&&jQuery.fn.inputmask},this.addListeners=function(){const[t]=this.nodes;t.addEventListener("blur",(()=>{const{value:s}=t;this.value.current=t.inputmask.unmaskedvalue(),this.reporting.validateOnBlur(),this.silenceSet(s)})),this.enterKey=new s,t.addEventListener("keydown",this.handleEnterKey.bind(this))},this.setNode=function(s){var i;e.prototype.setNode.call(this,s),this.clearOnSubmit=null!==(i=s.dataset.clearMaskOnSubmit)&&void 0!==i&&i;const n=t("jet.fb.inputmask.options",{},this);jQuery(s).inputmask(n),this.beforeSubmit(this.removeMask.bind(this)),this.getSubmit().onEndSubmit(this.revertMask.bind(this))},this.removeMask=function(t){const s=jQuery(this.nodes[0]);this.maskOptions=s.inputmask.opts,this.value.current&&!this.clearOnSubmit||(s.inputmask("remove"),this.value.notify()),t()},this.revertMask=function(){const[t]=this.nodes,s=this.maskOptions;this.maskOptions={},t.inputmask||jQuery(t).inputmask(s)},this.onClear=function(){this.silenceSet("")}}i.prototype=Object.create(e.prototype);const n=i,{addFilter:o}=JetPlugins.hooks;o("jet.fb.inputs","jet-form-builder/text-field-masked",(function(t){return[n,...t]}))})();