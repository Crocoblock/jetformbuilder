(()=>{"use strict";function t(t){var e;return null==t||null===(e=t.classList)||void 0===e?void 0:e.contains("jet-form-builder-choice")}function e(t){return t.closest(".jet-form-builder-choice--item")}function r(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){l=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw a}}}}function n(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o=JetFormBuilderAbstract,a=o.InputData,u=o.ReactiveSet,l=o.ReactiveHook,c=JetFormBuilderFunctions.getParsedName;function s(){a.call(this),this.isSupported=t,this.setNode=function(t){this.nodes=t.querySelectorAll(".jet-form-builder-choice--item input"),this.rawName=this.nodes[0].name,this.name=c(this.rawName),this.inputType="choice"},this.setValue=function(){this.value.current=this.isArray()?this.getMultipleValue():this.getSingleValue()},this.addListeners=function(){var t,e=this,n=r(this.nodes);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.addEventListener("change",(function(){return e.setValue()})),this.addListenerForChoice(i)}}catch(t){n.e(t)}finally{n.f()}this.isArray()&&this.sanitize((function(t){return Array.isArray(t)?t:[t]}))},this.getMultipleValue=function(){return Array.from(this.nodes).filter((function(t){return t.checked})).map((function(t){return t.value}))},this.getSingleValue=function(){var t,e=r(this.nodes);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.checked)return n.value}}catch(t){e.e(t)}finally{e.f()}return""},this.addListenerForChoice=function(t){var r=this,n=e(t);n.addEventListener("click",(function(e){return r.toggleChoice(t,e)})),this.enterKey=new l,this.isNativeControl(t)?t.addEventListener("keydown",this.handleEnterKey.bind(this)):n.addEventListener("keydown",(function(e){r.handleEnterKey(e),["Spacebar"," "].includes(e.key)&&(e.preventDefault(),r.toggleChoice(t))}))},this.toggleChoice=function(t,e){var r;"LABEL"!==(null==e||null===(r=e.target)||void 0===r?void 0:r.nodeName)&&(this.isArray()?this.value.toggle(t.value):this.value.current!==t.value?this.value.current=t.value:this.onClear())},this.hasAutoScroll=function(){return this.isNativeControl(this.nodes[0])},this.focusRaw=function(){var t,r,i=(t=this.nodes,r=1,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],l=!0,c=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(t,r)||n(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];this.isNativeControl(i)?a.prototype.focusRaw.call(this):e(i).focus({preventScroll:!0})}}s.prototype=Object.create(a.prototype),s.prototype.getReactive=function(){return new u},s.prototype.isNativeControl=function(t){return t.classList.contains("jet-form-builder-choice--item-control-input")},s.prototype.handleNextKey=function(t,e){},s.prototype.handleSpaceKey=function(t,e){["Spacebar"," "].includes(t.key)&&(t.preventDefault(),this.toggleChoice(e))};const f=s;function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d=JetFormBuilderAbstract.BaseSignal;function y(){d.call(this),this.isSupported=function(t,r){return!!e(t)},this.runSignal=function(){this.input.calcValue=0;var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(this.input.nodes);try{for(r.s();!(t=r.n()).done;){var n,i,o,a=t.value;a.checked=this.input.isArray()?null===(n=this.input.value.current)||void 0===n?void 0:n.includes(a.value):this.input.value.current===a.value;var u=e(a);u.classList.toggle("is-checked",a.checked),u.ariaPressed=a.checked,this.toggleImageControl(u,a.checked),a.checked&&(this.input.calcValue+=parseFloat(null!==(i=null===(o=a.dataset)||void 0===o?void 0:o.calculate)&&void 0!==i?i:a.value))}}catch(t){r.e(t)}finally{r.f()}}}y.prototype=Object.create(d.prototype),y.prototype.toggleImageControl=function(t,e){var r=t.querySelector(".jet-form-builder-choice--item-control-img");if(r){var n=e?r.dataset.srcChecked:r.dataset.srcDefault;r.src!==n&&(r.src=n)}};const v=y;function p(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return m(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=JetPlugins.hooks.addFilter;b("jet.fb.inputs","jet-form-builder/choices-field",(function(t){return[f].concat(p(t))})),b("jet.fb.signals","jet-form-builder/choices-field",(function(t){return[v].concat(p(t))}))})();