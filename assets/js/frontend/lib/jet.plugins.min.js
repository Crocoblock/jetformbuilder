(()=>{"use strict";const t=function(t){return"string"!=typeof t||""===t?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(t)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},e=function(t){return"string"!=typeof t||""===t?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(t)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(t)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},n=function(n,o){return function(i,r,s){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const l=n[o];if(!e(i))return;if(!t(r))return;if("function"!=typeof s)return void console.error("The hook callback must be a function.");if("number"!=typeof c)return void console.error("If specified, the hook priority must be a number.");const a={callback:s,priority:c,namespace:r};if(l[i]){const t=l[i].handlers;let e;for(e=t.length;e>0&&!(c>=t[e-1].priority);e--);e===t.length?t[e]=a:t.splice(e,0,a),l.__current.forEach((t=>{t.name===i&&t.currentIndex>=e&&t.currentIndex++}))}else l[i]={handlers:[a],runs:0};"hookAdded"!==i&&n.doAction("hookAdded",i,r,s,c)}},o=function(n,o){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r,s){const c=n[o];if(!e(r))return;if(!i&&!t(s))return;if(!c[r])return 0;let l=0;if(i)l=c[r].handlers.length,c[r]={runs:c[r].runs,handlers:[]};else{const t=c[r].handlers;for(let e=t.length-1;e>=0;e--)t[e].namespace===s&&(t.splice(e,1),l++,c.__current.forEach((t=>{t.name===r&&t.currentIndex>=e&&t.currentIndex--})))}return"hookRemoved"!==r&&n.doAction("hookRemoved",r,s),l}},i=function(t,e){return function(n,o){const i=t[e];return void 0!==o?n in i&&i[n].handlers.some((t=>t.namespace===o)):n in i}},r=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){const i=t[e];i[o]||(i[o]={handlers:[],runs:0}),i[o].runs++;const r=i[o].handlers;for(var s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];if(!r||!r.length)return n?c[0]:void 0;const a={name:o,currentIndex:0};for(i.__current.push(a);a.currentIndex<r.length;){const t=r[a.currentIndex].callback.apply(null,c);n&&(c[0]=t),a.currentIndex++}return i.__current.pop(),n?c[0]:void 0}},s=function(t,e){return function(){var n,o;const i=t[e];return null!==(n=null===(o=i.__current[i.__current.length-1])||void 0===o?void 0:o.name)&&void 0!==n?n:null}},c=function(t,e){return function(n){const o=t[e];return void 0===n?void 0!==o.__current[0]:!!o.__current[0]&&n===o.__current[0].name}},l=function(t,n){return function(o){const i=t[n];if(e(o))return i[o]&&i[o].runs?i[o].runs:0}};class a{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=n(this,"actions"),this.addFilter=n(this,"filters"),this.removeAction=o(this,"actions"),this.removeFilter=o(this,"filters"),this.hasAction=i(this,"actions"),this.hasFilter=i(this,"filters"),this.removeAllActions=o(this,"actions",!0),this.removeAllFilters=o(this,"filters",!0),this.doAction=r(this,"actions"),this.applyFilters=r(this,"filters",!0),this.currentAction=s(this,"actions"),this.currentFilter=s(this,"filters"),this.doingAction=c(this,"actions"),this.doingFilter=c(this,"filters"),this.didAction=l(this,"actions"),this.didFilter=l(this,"filters")}}const u=function(){return new a},h=u(),{addAction:d,addFilter:f,removeAction:k,removeFilter:m,hasAction:v,hasFilter:p,removeAllActions:g,removeAllFilters:b,doAction:y,applyFilters:A,currentAction:_,currentFilter:F,doingAction:B,doingFilter:I,didAction:w,didFilter:N,actions:j,filters:x}=h;function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,"hooks",void 0),C(this,"globalNamespace","jet-plugins"),C(this,"blocksNamespace","frontend.element-ready"),C(this,"blocksConditions",{}),this.hooks=e||u()}var e,n;return e=t,(n=[{key:"hookNameFromBlock",value:function(t){var e=this.getBlockName(t);return e?"".concat(this.globalNamespace,".").concat(this.blocksNamespace,".").concat(e):""}},{key:"getBlockName",value:function(t){var e;return"string"==typeof t?t.replace("/","."):this.getBlockName((null==t||null===(e=t.dataset)||void 0===e?void 0:e.isBlock)||"")}},{key:"init",value:function(t,e){var n=this;if(e&&e.length&&this.bulkBlocksInit(e),(t=t||jQuery("body"))&&t.length){var o=t.find('[data-is-block*="/"]');o&&o.length&&o.each((function(t,e){n.initBlock(e)}))}}},{key:"isBlockRequiresInit",value:function(t){var e=void 0===t.dataset.jetInited,n=this.getBlockName(t);return e&&this.blocksConditions[n]&&(e=this.blocksConditions[n](t)),e}},{key:"initBlock",value:function(t,e){e=e||!1;var n=this.hookNameFromBlock(t);if(n&&this.hasHandlers(n)){var o=e;o||(o=this.isBlockRequiresInit(t)),o&&(console.log(t.dataset.isBlock),this.hooks.doAction(n,jQuery(t)),t.dataset.jetInited=!0)}}},{key:"hasHandlers",value:function(t){return!!this.hooks.actions[t]&&!(!this.hooks.actions[t].handlers||!this.hooks.actions[t].handlers.length)}},{key:"registerBlockHandlers",value:function(t){var e=this.getBlockName(t.block);this.hooks.addAction(this.hookNameFromBlock(e),"".concat(this.globalNamespace,"/").concat(t.block),t.callback),t.condition&&"function"==typeof t.condition&&(this.blocksConditions[e]=t.condition)}},{key:"bulkBlocksInit",value:function(t){for(var e=0;e<t.length;e++)this.registerBlockHandlers(t[e])}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.JetPlugins=window.JetPlugins||new O})();