(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}const e=function(e,r){if(null===r||null==r||!r.length)return e;var n,o=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw u}}}}(r);try{for(o.s();!(n=o.n()).done;)e=n.value.applyWithProps(e)}catch(t){o.e(t)}finally{o.f()}return e};function r(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(){this.props=[]}o.prototype.getSlug=function(){throw new Error("getSlug is empty")},o.prototype.setProps=function(t){var e;(e=this.props).push.apply(e,r(t))},o.prototype.applyWithProps=function(t){return this.apply.apply(this,[t].concat(r(this.props)))},o.prototype.apply=function(t){return t};const i=o;function u(){i.call(this),this.getSlug=function(){return"length"},this.apply=function(t){var e;return null!==(e=null==t?void 0:t.length)&&void 0!==e?e:0}}u.prototype=Object.create(i.prototype);const a=u;function c(){i.call(this),this.getSlug=function(){return"ifEmpty"},this.apply=function(t,e){return t||e}}c.prototype=Object.create(i.prototype);const l=c;function s(t,e){return(t=""+t).length>=e?t:new Array(e-t.length).fill(0)+t}function p(t){return[t.getFullYear(),s(t.getMonth()+1,2),s(t.getDate(),2)].join("-")}function f(t){return[s(t.getHours(),2),s(t.getMinutes(),2)].join(":")}function y(t){return p(t)+"T"+f(t)}function h(t){if(!Number.isNaN(+t))return{time:+t,type:"number"};if((t=t.toString()).split("-").length>1){var e=new Date(t);return t.includes("T")||e.setHours(0,0,0),{time:e.getTime(),type:"date"}}var r=t.split(":"),n=[Date.prototype.setHours,Date.prototype.setMinutes,Date.prototype.setSeconds],o=new Date;for(var i in r)r.hasOwnProperty(i)&&n.hasOwnProperty(i)&&n[i].call(o,r[i]);return{time:o.getTime(),type:"time"}}function m(){i.call(this),this.getSlug=function(){return"toDate"},this.apply=function(t){return p(new Date(t))}}m.prototype=Object.create(i.prototype);const g=m;function d(){i.call(this),this.getSlug=function(){return"toTime"},this.apply=function(t){return f(new Date(t))}}d.prototype=Object.create(i.prototype);const b=d;function v(){i.call(this),this.getSlug=function(){return"toDateTime"},this.apply=function(t){return y(new Date(t))}}v.prototype=Object.create(i.prototype);const w=v;function S(){i.call(this),this.getSlug=function(){return"addYear"},this.apply=function(t,e){e=e?+e.trim():1;var r=new Date(t);return r.setFullYear(r.getFullYear()+e)}}S.prototype=Object.create(i.prototype);const _=S;function I(){i.call(this),this.getSlug=function(){return"addMonth"},this.apply=function(t,e){e=e?+e.trim():1;var r=new Date(t);return r.setMonth(r.getMonth()+e)}}I.prototype=Object.create(i.prototype);const j=I;function O(){i.call(this),this.getSlug=function(){return"addDay"},this.apply=function(t,e){e=e?+e.trim():1;var r=new Date(t);return r.setDate(r.getDate()+e)}}O.prototype=Object.create(i.prototype);const D=O;function A(){i.call(this),this.getSlug=function(){return"addHour"},this.apply=function(t,e){var r=h(t).time,n=new Date(r);return Number.isNaN(n.getTime())?0:(e=e?+e.trim():1,n.setHours(n.getHours()+e))}}A.prototype=Object.create(i.prototype);const M=A;function F(){i.call(this),this.getSlug=function(){return"addMin"},this.apply=function(t,e){var r=h(t).time,n=new Date(r);return Number.isNaN(n.getTime())?0:(e=e?+e.trim():1,n.setMinutes(n.getMinutes()+e))}}F.prototype=Object.create(i.prototype);const T=F;function N(){i.call(this),this.getSlug=function(){return"T"},this.apply=function(t){return t?h(t).time:0}}N.prototype=Object.create(i.prototype);const H=N;function B(){i.call(this),this.getSlug=function(){return"setHour"},this.apply=function(t,e){var r=h(t).time,n=new Date(r);return Number.isNaN(n.getTime())?0:(e=e?+e.trim():1,n.setHours(e))}}B.prototype=Object.create(i.prototype);const P=B;function C(){i.call(this),this.getSlug=function(){return"setMin"},this.apply=function(t,e){var r=h(t).time,n=new Date(r);return Number.isNaN(n.getTime())?0:(e=e?+e.trim():1,n.setMinutes(e))}}C.prototype=Object.create(i.prototype);const E=C;function Y(){i.call(this),this.getSlug=function(){return"setDay"},this.apply=function(t,e){return e=e?+e.trim():1,new Date(t).setDate(e)}}Y.prototype=Object.create(i.prototype);const R=Y;function J(){i.call(this),this.getSlug=function(){return"setYear"},this.apply=function(t,e){return e=e?+e.trim():1,new Date(t).setFullYear(e)}}J.prototype=Object.create(i.prototype);const k=J;function U(){i.call(this),this.getSlug=function(){return"setMonth"},this.apply=function(t,e){return e=e?+e.trim():1,new Date(t).setMonth(e)}}U.prototype=Object.create(i.prototype);const $=U;function x(){i.call(this),this.getSlug=function(){return"subHour"},this.apply=function(t,e){var r=h(t).time,n=new Date(r);return Number.isNaN(n.getTime())?0:(e=e?+e.trim():1,n.setHours(n.getHours()-e))}}x.prototype=Object.create(i.prototype);const G=x;function K(){i.call(this),this.getSlug=function(){return"subDay"},this.apply=function(t,e){e=e?+e.trim():1;var r=new Date(t);return r.setDate(r.getDate()-e)}}K.prototype=Object.create(i.prototype);const W=K;function Q(){i.call(this),this.getSlug=function(){return"subMin"},this.apply=function(t,e){var r=h(t).time,n=new Date(r);return Number.isNaN(n.getTime())?0:(e=e?+e.trim():1,n.setMinutes(n.getMinutes()-e))}}Q.prototype=Object.create(i.prototype);const q=Q;function z(){i.call(this),this.getSlug=function(){return"subMonth"},this.apply=function(t,e){e=e?+e.trim():1;var r=new Date(t);return r.setMonth(r.getMonth()-e)}}z.prototype=Object.create(i.prototype);const L=z;function V(){i.call(this),this.getSlug=function(){return"subDay"},this.apply=function(t,e){e=e?+e.trim():1;var r=new Date(t);return r.setFullYear(r.getFullYear()-e)}}V.prototype=Object.create(i.prototype);const X=V;function Z(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=tt(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}function tt(t,e){if(t){if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?et(t,e):void 0}}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var rt=wp.hooks.applyFilters,nt=[],ot=function(){return rt("jet.fb.restrictions.filters",[k,$,R,P,E,X,L,W,G,q,_,j,D,M,T,a,l,g,b,w,H])},it=[];function ut(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";nt.length||(nt=ot());var n,o=Z(nt);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(t===(i=new i).getSlug()){e=i;break}}}catch(t){o.e(t)}finally{o.f()}e&&(r=r.split(",").map((function(t){return t.trim()})),e.setProps(r),it.push(e))}const at=function(t){if(null===t||null==t||!t.length)return null;var e,r=Z(t);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=n.match(/^(\w+)\(([^()]+)\)/);null!==o?ut(o[1],o[2]):ut(n)}}catch(t){r.e(t)}finally{r.f()}var i,u=function(t){if(Array.isArray(t))return et(t)}(i=it)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||tt(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return it=[],u};function ct(){}ct.prototype={getId:function(){throw new Error("You need to rewrite this method")},getResult:function(){throw new Error("You need to rewrite this method")}};const lt=ct;function st(){lt.call(this),this.getId=function(){return"CurrentDate"},this.getResult=function(){return(new Date).getTime()}}st.prototype=Object.create(lt.prototype);const pt=st;var ft={Milli_In_Sec:1e3,Sec_In_Min:60,Min_In_Hour:60,Hour_In_Day:24,Day_In_Month:30,Year_In_Day:365,Kb_In_Bytes:1024};ft.Min_In_Sec=ft.Sec_In_Min*ft.Milli_In_Sec,ft.Hour_In_Sec=ft.Min_In_Hour*ft.Min_In_Sec,ft.Day_In_Sec=ft.Hour_In_Day*ft.Hour_In_Sec,ft.Month_In_Sec=ft.Day_In_Month*ft.Day_In_Sec,ft.Year_In_Sec=ft.Year_In_Day*ft.Day_In_Sec,ft.Mb_In_Bytes=1024*ft.Kb_In_Bytes,ft.Gb_In_Bytes=1024*ft.Mb_In_Bytes,ft.Tb_In_Bytes=1024*ft.Gb_In_Bytes;const yt=ft;function ht(){lt.call(this),this.getId=function(){return"Min_In_Sec"},this.getResult=function(){return yt.Min_In_Sec}}ht.prototype=Object.create(lt.prototype);const mt=ht;function gt(){lt.call(this),this.getId=function(){return"Month_In_Sec"},this.getResult=function(){return yt.Month_In_Sec}}gt.prototype=Object.create(lt.prototype);const dt=gt;function bt(){lt.call(this),this.getId=function(){return"Hour_In_Sec"},this.getResult=function(){return yt.Hour_In_Sec}}bt.prototype=Object.create(lt.prototype);const vt=bt;function wt(){lt.call(this),this.getId=function(){return"Day_In_Sec"},this.getResult=function(){return yt.Day_In_Sec}}wt.prototype=Object.create(lt.prototype);const St=wt;function _t(){lt.call(this),this.getId=function(){return"Year_In_Sec"},this.getResult=function(){return yt.Year_In_Sec}}_t.prototype=Object.create(lt.prototype);const It=_t;function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ot=wp.hooks.applyFilters,Dt=[];function At(t){Dt.length||(Dt=Ot("jet.fb.static.functions",[pt,mt,dt,vt,St,It]));var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return jt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==r.return||r.return()}finally{if(a)throw i}}}}(Dt);try{for(r.s();!(e=r.n()).done;){var n=new(0,e.value);if(n.getId()===t)return n}}catch(t){r.e(t)}finally{r.f()}return!1}var Mt,Ft,Tt;function Nt(t){return Bt(t)||Et(t)||Ct(t)||Ht()}function Ht(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bt(t){if(Array.isArray(t))return t}function Pt(t){return function(t){if(Array.isArray(t))return Yt(t)}(t)||Et(t)||Ct(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(t,e){if(t){if("string"==typeof t)return Yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yt(t,e):void 0}}function Et(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function Yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Rt=JetFormBuilderAbstract.InputData,Jt=wp.hooks,kt=Jt.applyFilters,Ut=Jt.addFilter,$t=(null!==(Mt=null===(Ft=window)||void 0===Ft||null===(Tt=Ft.JetFormBuilderMain)||void 0===Tt?void 0:Tt.filters)&&void 0!==Mt?Mt:{}).applyFilters,xt=void 0!==$t&&$t;function Gt(t,e){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.formula=t,this.parts=[],this.related=[],this.relatedAttrs=[];var i=o.forceFunction,u=void 0!==i&&i;this.forceFunction=u,e instanceof Rt&&(this.input=e),this.root=null!==(r=null===(n=this.input)||void 0===n?void 0:n.root)&&void 0!==r?r:e,this.observe(t)}Ut("jet.fb.custom.formula.macro","jet-form-builder",(function(t,e,r){if(!e.includes("CT::"))return t;var n=At(e=e.replace("CT::",""));return!1===n?t:n.getResult()})),Gt.prototype={formula:null,parts:[],related:[],relatedAttrs:[],input:null,root:null,forceFunction:!1,setResult:function(){throw new Error("CalculatedFormula.setResult is not set!")},relatedCallback:function(t){return t.value.current},observe:function(t){var e=this;if(Array.isArray(t))t.forEach((function(t){e.observe(t)}));else{var r=t.split(/%(.*?)%/g);1!==r.length&&(this.parts=[].concat(Pt(this.parts),Pt(r.map(this.observeMacro.bind(this)))))}},observeMacro:function(t){var r=this,n=Nt(t.split("|")),o=n[0],i=n.slice(1),u=o.match(/[\w\-:]+/g);if(!u)return t;var a=Nt(u),c=a[0],l=a.slice(1),s="this"!==c?this.root.getInput(c):this.input;if(!s&&!c.includes("::"))return t;var p=at(i);if(c.includes("::")){var f=kt("jet.fb.custom.formula.macro",!1,c,l,this);return!1===f?t:e(f,p)}if(this.related.includes(s.name)||(this.related.push(s.name),s.watch((function(){return r.setResult()}))),null==l||!l.length)return function(){return e(r.relatedCallback(s),p)};var y,h,m=(y=l,h=1,Bt(y)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,a=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}}(y,h)||Ct(y,h)||Ht())[0];if(!s.attrs.hasOwnProperty(m))return t;var g=s.attrs[m];return this.relatedAttrs.includes(s.name+m)||(this.relatedAttrs.push(s.name+m),g.value.watch((function(){return r.setResult()}))),function(){return e(g.value.current,p)}},calculateString:function(){var t=this;return this.parts.length?this.parts.map((function(e){var r;if("function"!=typeof e)return null!==(r=t.input)&&void 0!==r&&r.nodes&&!1!==xt?(e=kt("jet.fb.onCalculate.part",e,t),xt("forms/calculated-formula-before-value",e,jQuery(t.input.nodes[0]))):e;var n=e();return null===n||""===n?0:n})).join(""):this.formula},calculate:function(){if(!this.parts.length&&!this.forceFunction)return this.formula;var t=this.calculateString();return new Function("return "+t)()}};const Kt=Gt;var Wt,Qt,qt;function zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(r),!0).forEach((function(e){Vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}window.JetFormBuilderAbstract=Lt(Lt({},null!==(Wt=window.JetFormBuilderAbstract)&&void 0!==Wt?Wt:{}),{},{Filter:i,CalculatedFormula:Kt,BaseInternalMacro:lt}),window.JetFormBuilderFunctions=Lt(Lt({},null!==(Qt=window.JetFormBuilderFunctions)&&void 0!==Qt?Qt:{}),{},{getFilters:at,applyFilters:e,toDate:p,toDateTime:y,toTime:f,getTimestamp:h}),window.JetFormBuilderConst=Lt(Lt({},null!==(qt=window.JetFormBuilderConst)&&void 0!==qt?qt:{}),yt)})();