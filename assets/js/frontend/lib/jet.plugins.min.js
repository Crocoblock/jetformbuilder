(()=>{"use strict";const t=function(t){return"string"!=typeof t||""===t?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(t)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},e=function(t){return"string"!=typeof t||""===t?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(t)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(t)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},n=function(n,o){return function(i,r,s){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const l=n[o];if(!e(i))return;if(!t(r))return;if("function"!=typeof s)return void console.error("The hook callback must be a function.");if("number"!=typeof c)return void console.error("If specified, the hook priority must be a number.");const a={callback:s,priority:c,namespace:r};if(l[i]){const t=l[i].handlers;let e;for(e=t.length;e>0&&!(c>=t[e-1].priority);e--);e===t.length?t[e]=a:t.splice(e,0,a),l.__current.forEach((t=>{t.name===i&&t.currentIndex>=e&&t.currentIndex++}))}else l[i]={handlers:[a],runs:0};"hookAdded"!==i&&n.doAction("hookAdded",i,r,s,c)}},o=function(n,o){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r,s){const c=n[o];if(!e(r))return;if(!i&&!t(s))return;if(!c[r])return 0;let l=0;if(i)l=c[r].handlers.length,c[r]={runs:c[r].runs,handlers:[]};else{const t=c[r].handlers;for(let e=t.length-1;e>=0;e--)t[e].namespace===s&&(t.splice(e,1),l++,c.__current.forEach((t=>{t.name===r&&t.currentIndex>=e&&t.currentIndex--})))}return"hookRemoved"!==r&&n.doAction("hookRemoved",r,s),l}},i=function(t,e){return function(n,o){const i=t[e];return void 0!==o?n in i&&i[n].handlers.some((t=>t.namespace===o)):n in i}},r=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){const i=t[e];i[o]||(i[o]={handlers:[],runs:0}),i[o].runs++;const r=i[o].handlers;for(var s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];if(!r||!r.length)return n?c[0]:void 0;const a={name:o,currentIndex:0};for(i.__current.push(a);a.currentIndex<r.length;){const t=r[a.currentIndex].callback.apply(null,c);n&&(c[0]=t),a.currentIndex++}return i.__current.pop(),n?c[0]:void 0}},s=function(t,e){return function(){var n,o;const i=t[e];return null!==(n=null===(o=i.__current[i.__current.length-1])||void 0===o?void 0:o.name)&&void 0!==n?n:null}},c=function(t,e){return function(n){const o=t[e];return void 0===n?void 0!==o.__current[0]:!!o.__current[0]&&n===o.__current[0].name}},l=function(t,n){return function(o){const i=t[n];if(e(o))return i[o]&&i[o].runs?i[o].runs:0}};class a{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=n(this,"actions"),this.addFilter=n(this,"filters"),this.removeAction=o(this,"actions"),this.removeFilter=o(this,"filters"),this.hasAction=i(this,"actions"),this.hasFilter=i(this,"filters"),this.removeAllActions=o(this,"actions",!0),this.removeAllFilters=o(this,"filters",!0),this.doAction=r(this,"actions"),this.applyFilters=r(this,"filters",!0),this.currentAction=s(this,"actions"),this.currentFilter=s(this,"filters"),this.doingAction=c(this,"actions"),this.doingFilter=c(this,"filters"),this.didAction=l(this,"actions"),this.didFilter=l(this,"filters")}}const u=function(){return new a},h=u(),{addAction:d,addFilter:f,removeAction:v,removeFilter:k,hasAction:m,hasFilter:y,removeAllActions:b,removeAllFilters:p,doAction:g,applyFilters:A,currentAction:_,currentFilter:B,doingAction:N,doingFilter:F,didAction:I,didFilter:w,actions:j,filters:R}=h;function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function S(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,C(o.key),o)}}function T(t,e,n){return(e=C(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C(t){var e=function(t,e){if("object"!==x(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==x(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===x(e)?e:String(e)}var P=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,"hooks",void 0),T(this,"globalNamespace","jet-plugins"),T(this,"blocksConditions",{}),this.hooks=e||u()}var e,n;return e=t,(n=[{key:"hookNameBlockReady",value:function(t){var e=this.getBlockName(t);return e?"".concat(this.globalNamespace,".frontend.element-ready.").concat(e):""}},{key:"hookNameBlockRemoved",value:function(t){var e=this.getBlockName(t);return e?"".concat(this.globalNamespace,".frontend.element-removed.").concat(e):""}},{key:"getBlockName",value:function(t){var e;return"string"==typeof t?t.replace("/","."):this.getBlockName((null==t||null===(e=t.dataset)||void 0===e?void 0:e.isBlock)||"")}},{key:"init",value:function(t,e){var n,o=this;e&&e.length&&this.bulkBlocksInit(e);var i=this.getBlocks(t);null==i||null===(n=i.each)||void 0===n||n.call(i,(function(t,e){o.initBlock(e)}))}},{key:"remove",value:function(t){var e,n=this,o=this.getBlocks(t);null==o||null===(e=o.each)||void 0===e||e.call(o,(function(t,e){n.removeBlock(e)}))}},{key:"isBlockRequiresInit",value:function(t){var e=void 0===t.dataset.jetInited,n=this.getBlockName(t);return e&&this.blocksConditions[n]&&(e=this.blocksConditions[n](t)),e}},{key:"initBlock",value:function(t,e){e=e||!1;var n=this.hookNameBlockReady(t);if(n&&this.hasHandlers(n)){var o=e;o||(o=this.isBlockRequiresInit(t)),o&&(this.hooks.doAction(n,jQuery(t)),t.dataset.jetInited=!0)}}},{key:"removeBlock",value:function(t){var e=this.hookNameBlockRemoved(t);this.hooks.doAction(e,jQuery(t)),t.dataset.jetInited=!1}},{key:"hasHandlers",value:function(t){return!!this.hooks.actions[t]&&!(!this.hooks.actions[t].handlers||!this.hooks.actions[t].handlers.length)}},{key:"registerBlockHandlers",value:function(t){var e=this.getBlockName(t.block);this.hooks.addAction(this.hookNameBlockReady(e),"".concat(this.globalNamespace,"/").concat(t.block),t.callback),(null==t?void 0:t.removeCallback)&&this.hooks.addAction(this.hookNameBlockRemoved(e),"".concat(this.globalNamespace,"/").concat(t.block),t.removeCallback),t.condition&&"function"==typeof t.condition&&(this.blocksConditions[e]=t.condition)}},{key:"bulkBlocksInit",value:function(t){for(var e=0;e<t.length;e++)this.registerBlockHandlers(t[e])}},{key:"getBlocks",value:function(t){if((t=t||jQuery("body"))&&t.length){var e=t.find('[data-is-block*="/"]');return null!=e&&e.length?e:[]}}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();window.JetPlugins=window.JetPlugins||new P})();