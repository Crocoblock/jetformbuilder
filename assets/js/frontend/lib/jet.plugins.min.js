(()=>{"use strict";const e=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},t=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},n=function(n,o){return function(r,i,s){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const l=n[o];if(!t(r))return;if(!e(i))return;if("function"!=typeof s)return void console.error("The hook callback must be a function.");if("number"!=typeof c)return void console.error("If specified, the hook priority must be a number.");const a={callback:s,priority:c,namespace:i};if(l[r]){const e=l[r].handlers;let t;for(t=e.length;t>0&&!(c>=e[t-1].priority);t--);t===e.length?e[t]=a:e.splice(t,0,a),l.__current.forEach((e=>{e.name===r&&e.currentIndex>=t&&e.currentIndex++}))}else l[r]={handlers:[a],runs:0};"hookAdded"!==r&&n.doAction("hookAdded",r,i,s,c)}},o=function(n,o){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(i,s){const c=n[o];if(!t(i))return;if(!r&&!e(s))return;if(!c[i])return 0;let l=0;if(r)l=c[i].handlers.length,c[i]={runs:c[i].runs,handlers:[]};else{const e=c[i].handlers;for(let t=e.length-1;t>=0;t--)e[t].namespace===s&&(e.splice(t,1),l++,c.__current.forEach((e=>{e.name===i&&e.currentIndex>=t&&e.currentIndex--})))}return"hookRemoved"!==i&&n.doAction("hookRemoved",i,s),l}},r=function(e,t){return function(n,o){const r=e[t];return void 0!==o?n in r&&r[n].handlers.some((e=>e.namespace===o)):n in r}},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(o){const r=e[t];r[o]||(r[o]={handlers:[],runs:0}),r[o].runs++;const i=r[o].handlers;for(var s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];if(!i||!i.length)return n?c[0]:void 0;const a={name:o,currentIndex:0};for(r.__current.push(a);a.currentIndex<i.length;){const e=i[a.currentIndex].callback.apply(null,c);n&&(c[0]=e),a.currentIndex++}return r.__current.pop(),n?c[0]:void 0}},s=function(e,t){return function(){var n,o;const r=e[t];return null!==(n=null===(o=r.__current[r.__current.length-1])||void 0===o?void 0:o.name)&&void 0!==n?n:null}},c=function(e,t){return function(n){const o=e[t];return void 0===n?void 0!==o.__current[0]:!!o.__current[0]&&n===o.__current[0].name}},l=function(e,n){return function(o){const r=e[n];if(t(o))return r[o]&&r[o].runs?r[o].runs:0}};class a{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=n(this,"actions"),this.addFilter=n(this,"filters"),this.removeAction=o(this,"actions"),this.removeFilter=o(this,"filters"),this.hasAction=r(this,"actions"),this.hasFilter=r(this,"filters"),this.removeAllActions=o(this,"actions",!0),this.removeAllFilters=o(this,"filters",!0),this.doAction=i(this,"actions"),this.applyFilters=i(this,"filters",!0),this.currentAction=s(this,"actions"),this.currentFilter=s(this,"filters"),this.doingAction=c(this,"actions"),this.doingFilter=c(this,"filters"),this.didAction=l(this,"actions"),this.didFilter=l(this,"filters")}}const u=function(){return new a},h=u(),{addAction:d,addFilter:f,removeAction:k,removeFilter:m,hasAction:v,hasFilter:y,removeAllActions:b,removeAllFilters:p,doAction:g,applyFilters:A,currentAction:B,currentFilter:_,doingAction:N,doingFilter:F,didAction:w,didFilter:I,actions:j,filters:R}=h;function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,T(o.key),o)}}function S(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===P(t)?t:String(t)}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"hooks",void 0),S(this,"globalNamespace","jet-plugins"),S(this,"blocksConditions",{}),this.hooks=t||u()}var t,n;return t=e,(n=[{key:"hookNameFromBlock",value:function(e){return console.warn("JetPlugins.hookNameFromBlock is deprecated. Use JetPlugins.hookNameBlockReady instead"),this.hookNameBlockReady(e)}},{key:"hookNameBlockReady",value:function(e){var t=this.getBlockName(e);return t?"".concat(this.globalNamespace,".frontend.element-ready.").concat(t):""}},{key:"hookNameBlockRemoved",value:function(e){var t=this.getBlockName(e);return t?"".concat(this.globalNamespace,".frontend.element-removed.").concat(t):""}},{key:"getBlockName",value:function(e){var t;return"string"==typeof e?e.replace("/","."):this.getBlockName((null==e||null===(t=e.dataset)||void 0===t?void 0:t.isBlock)||"")}},{key:"init",value:function(e,t){var n,o=this;t&&t.length&&this.bulkBlocksInit(t);var r=this.getBlocks(e);null==r||null===(n=r.each)||void 0===n||n.call(r,(function(e,t){o.initBlock(t)}))}},{key:"remove",value:function(e){var t,n=this,o=this.getBlocks(e);null==o||null===(t=o.each)||void 0===t||t.call(o,(function(e,t){n.removeBlock(t)}))}},{key:"isBlockRequiresInit",value:function(e){var t=void 0===e.dataset.jetInited,n=this.getBlockName(e);return t&&this.blocksConditions[n]&&(t=this.blocksConditions[n](e)),t}},{key:"initBlock",value:function(e,t){t=t||!1;var n=this.hookNameBlockReady(e);if(n&&this.hasHandlers(n)){var o=t;o||(o=this.isBlockRequiresInit(e)),o&&(this.hooks.doAction(n,jQuery(e)),e.dataset.jetInited=!0)}}},{key:"removeBlock",value:function(e){var t=this.hookNameBlockRemoved(e);this.hooks.doAction(t,jQuery(e)),e.dataset.jetInited=!1}},{key:"hasHandlers",value:function(e){return!!this.hooks.actions[e]&&!(!this.hooks.actions[e].handlers||!this.hooks.actions[e].handlers.length)}},{key:"registerBlockHandlers",value:function(e){var t=this.getBlockName(e.block);this.hooks.addAction(this.hookNameBlockReady(t),"".concat(this.globalNamespace,"/").concat(e.block),e.callback),(null==e?void 0:e.removeCallback)&&this.hooks.addAction(this.hookNameBlockRemoved(t),"".concat(this.globalNamespace,"/").concat(e.block),e.removeCallback),e.condition&&"function"==typeof e.condition&&(this.blocksConditions[t]=e.condition)}},{key:"bulkBlocksInit",value:function(e){for(var t=0;t<e.length;t++)this.registerBlockHandlers(e[t])}},{key:"getBlocks",value:function(e){if(!(e=e||jQuery("body"))||!e.length)return[];var t=e.find('[data-is-block*="/"]');return null!=t&&t.length?t:[]}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.JetPlugins=window.JetPlugins||new C})();