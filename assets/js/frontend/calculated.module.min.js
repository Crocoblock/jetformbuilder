(()=>{"use strict";function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}const r=function(r,e){if(null===e||null==e||!e.length)return r;var n,o=function(r,e){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,l=!1;return{s:function(){n=n.call(r)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw u}}}}(e);try{for(o.s();!(n=o.n()).done;)r=n.value.applyWithProps(r)}catch(t){o.e(t)}finally{o.f()}return r};function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(){this.props=[]}o.prototype.getSlug=function(){throw new Error("getSlug is empty")},o.prototype.setProps=function(t){var r;(r=this.props).push.apply(r,e(t))},o.prototype.applyWithProps=function(t){return this.apply.apply(this,[t].concat(e(this.props)))},o.prototype.apply=function(t){return t};const i=o;function u(){i.call(this),this.getSlug=function(){return"length"},this.apply=function(t){var r;return null!==(r=null==t?void 0:t.length)&&void 0!==r?r:0}}u.prototype=Object.create(i.prototype);const a=u;function l(){i.call(this),this.getSlug=function(){return"ifEmpty"},this.apply=function(t,r){return t||r}}l.prototype=Object.create(i.prototype);const c=l;function s(t,r){return(t=""+t).length>=r?t:new Array(r-t.length).fill(0)+t}function f(t){return[t.getFullYear(),s(t.getMonth()+1,2),s(t.getDate(),2)].join("-")}function p(t){return[s(t.getHours(),2),s(t.getMinutes(),2)].join(":")}function y(t){return f(t)+"T"+p(t)}function h(){i.call(this),this.getSlug=function(){return"toDate"},this.apply=function(t){return f(new Date(t))}}h.prototype=Object.create(i.prototype);const d=h;function m(){i.call(this),this.getSlug=function(){return"toTime"},this.apply=function(t){return p(new Date(t))}}m.prototype=Object.create(i.prototype);const b=m;function v(){i.call(this),this.getSlug=function(){return"toDateTime"},this.apply=function(t){return y(new Date(t))}}v.prototype=Object.create(i.prototype);const g=v;function w(){i.call(this),this.getSlug=function(){return"addDay"},this.apply=function(t,r){r=r?+r.trim():1;var e=new Date(t);return e.setDate(e.getDate()+r),e.getTime()}}w.prototype=Object.create(i.prototype);const _=w;function S(t,r){if(t){if("string"==typeof t)return I(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?I(t,r):void 0}}function I(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var j=wp.hooks.applyFilters,A=function(){return j("jet.fb.restrictions.filters",[a,c,d,b,g,_])},O=[],D=[];function M(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";O.length||(O=A().map((function(t){return new t})));var e=O.find((function(r){return t===r.getSlug()}));e&&(r=r.split(",").map((function(t){return t.trim()})),e.setProps(r),D.push(e))}const F=function(t){if(null===t||null==t||!t.length)return null;var r,e=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=S(t))){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}(t);try{for(e.s();!(r=e.n()).done;){var n=r.value,o=n.match(/^(\w+)\(([^()]+)\)/);null!==o?M(o[1],o[2]):M(n)}}catch(t){e.e(t)}finally{e.f()}var i,u=function(t){if(Array.isArray(t))return I(t)}(i=D)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||S(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return D=[],u};function T(){}T.prototype={getId:function(){throw new Error("You need to rewrite this method")},getResult:function(){throw new Error("You need to rewrite this method")}};const B=T;function P(){B.call(this),this.getId=function(){return"CurrentDate"},this.getResult=function(){return(new Date).getTime()}}P.prototype=Object.create(B.prototype);const C=P;var E={Milli_In_Sec:1e3,Sec_In_Min:60,Min_In_Hour:60,Hour_In_Day:24,Day_In_Month:30,Year_In_Day:365,Kb_In_Bytes:1024};E.Min_In_Sec=E.Sec_In_Min*E.Milli_In_Sec,E.Hour_In_Sec=E.Min_In_Hour*E.Min_In_Sec,E.Day_In_Sec=E.Hour_In_Day*E.Hour_In_Sec,E.Month_In_Sec=E.Day_In_Month*E.Day_In_Sec,E.Year_In_Sec=E.Year_In_Day*E.Day_In_Sec,E.Mb_In_Bytes=1024*E.Kb_In_Bytes,E.Gb_In_Bytes=1024*E.Mb_In_Bytes,E.Tb_In_Bytes=1024*E.Gb_In_Bytes;const R=E;function H(){B.call(this),this.getId=function(){return"Min_In_Sec"},this.getResult=function(){return R.Min_In_Sec}}H.prototype=Object.create(B.prototype);const J=H;function Y(){B.call(this),this.getId=function(){return"Month_In_Sec"},this.getResult=function(){return R.Month_In_Sec}}Y.prototype=Object.create(B.prototype);const k=Y;function U(){B.call(this),this.getId=function(){return"Hour_In_Sec"},this.getResult=function(){return R.Hour_In_Sec}}U.prototype=Object.create(B.prototype);const $=U;function x(){B.call(this),this.getId=function(){return"Day_In_Sec"},this.getResult=function(){return R.Day_In_Sec}}x.prototype=Object.create(B.prototype);const N=x;function G(){B.call(this),this.getId=function(){return"Year_In_Sec"},this.getResult=function(){return R.Year_In_Sec}}G.prototype=Object.create(B.prototype);const K=G;function W(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Q=wp.hooks.applyFilters,q=[];function z(t){q.length||(q=Q("jet.fb.static.functions",[C,J,k,$,N,K]));var r,e=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return W(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?W(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}(q);try{for(e.s();!(r=e.n()).done;){var n=new(0,r.value);if(n.getId()===t)return n}}catch(t){e.e(t)}finally{e.f()}return!1}var L,V,X;function Z(t){return nt(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rt(t)||tt()}function tt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function rt(t,r){if(t){if("string"==typeof t)return et(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?et(t,r):void 0}}function et(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function nt(t){if(Array.isArray(t))return t}var ot=JetFormBuilderAbstract.InputData,it=wp.hooks,ut=it.applyFilters,at=it.addFilter,lt=(null!==(L=null===(V=window)||void 0===V||null===(X=V.JetFormBuilderMain)||void 0===X?void 0:X.filters)&&void 0!==L?L:{}).applyFilters,ct=void 0!==lt&&lt;function st(t,r){var e,n;this.formula=t,this.parts=[],this.related=[],this.relatedAttrs=[],r instanceof ot&&(this.input=r),this.observe(t,null!==(e=null===(n=this.input)||void 0===n?void 0:n.root)&&void 0!==e?e:r)}at("jet.fb.custom.formula.macro","jet-form-builder",(function(t,r,e){if(!r.includes("CT::"))return t;var n=z(r=r.replace("CT::",""));return!1===n?t:n.getResult()})),st.prototype={formula:null,parts:[],related:[],relatedAttrs:[],input:null,setResult:function(){throw new Error("CalculatedFormula.setResult is not set!")},relatedCallback:function(t){return t.value.current},observe:function(t,e){var n=this;if(Array.isArray(t))t.forEach((function(t){n.observe(t,e)}));else{var o=t.split(/%(.*?)%/g);1!==o.length&&(this.parts=o.map((function(t){var o=Z(t.split("|")),i=o[0],u=o.slice(1),a=i.match(/[\w\-:]+/g);if(!a)return t;var l=Z(a),c=l[0],s=l.slice(1),f="this"!==c?e.getInput(c):n.input;if(!f&&!c.includes("::"))return t;var p=F(u);if(c.includes("::")){var y=ut("jet.fb.custom.formula.macro",!1,c,s,e,n);return!1===y?t:r(y,p)}if(n.related.includes(f.name)||(n.related.push(f.name),f.watch((function(){return n.setResult()}))),null==s||!s.length)return function(){return r(n.relatedCallback(f),p)};var h,d,m=(h=s,d=1,nt(h)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i=[],u=!0,a=!1;try{for(e=e.call(t);!(u=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==e.return||e.return()}finally{if(a)throw o}}return i}}(h,d)||rt(h,d)||tt())[0];if(!f.attrs.hasOwnProperty(m))return t;var b=f.attrs[m];return n.relatedAttrs.includes(f.name+m)||(n.relatedAttrs.push(f.name+m),b.value.watch((function(){return n.setResult()}))),function(){return r(b.value.current,p)}})))}},calculateString:function(){var t=this;return this.parts.length?this.parts.map((function(r){var e;if("function"!=typeof r)return null!==(e=t.input)&&void 0!==e&&e.nodes&&!1!==ct?(r=ut("jet.fb.onCalculate.part",r,t),ct("forms/calculated-formula-before-value",r,jQuery(t.input.nodes[0]))):r;var n=r();return null===n?0:n})).join(""):this.formula},calculate:function(){if(!this.parts.length)return this.formula;var t=this.calculateString();return new Function("return "+t)()}};const ft=st;var pt,yt,ht;function dt(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function mt(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?dt(Object(e),!0).forEach((function(r){bt(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):dt(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function bt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}window.JetFormBuilderAbstract=mt(mt({},null!==(pt=window.JetFormBuilderAbstract)&&void 0!==pt?pt:{}),{},{Filter:i,CalculatedFormula:ft,BaseInternalMacro:B}),window.JetFormBuilderFunctions=mt(mt({},null!==(yt=window.JetFormBuilderFunctions)&&void 0!==yt?yt:{}),{},{getFilters:F,applyFilters:r,toDate:f,toDateTime:y,toTime:p,getTimestamp:function(t){if(!Number.isNaN(+t))return{time:+t,type:"number"};if((t=t.toString()).split("-").length>1){var r=new Date(t);return t.includes("T")||r.setHours(0,0,0),{time:r.getTime(),type:"date"}}var e=t.split(":"),n=[Date.prototype.setHours,Date.prototype.setMinutes,Date.prototype.setSeconds],o=new Date;for(var i in e)e.hasOwnProperty(i)&&n.hasOwnProperty(i)&&n[i].call(o,e[i]);return{time:o.getTime(),type:"time"}}}),window.JetFormBuilderConst=mt(mt({},null!==(ht=window.JetFormBuilderConst)&&void 0!==ht?ht:{}),R)})();