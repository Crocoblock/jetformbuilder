(()=>{var e={323:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(168),n=r.n(s),o=r(814),i=r.n(o)()(n());i.push([e.id,".cx-vue-list-table .list-table-item--not-viewed{background-color:#f7fdff}",""]);const l=i},977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(168),n=r.n(s),o=r(814),i=r.n(o)()(n());i.push([e.id,".jfb-dates-wrapper{display:flex;gap:1em}.cx-vui-popup.export-popup .cx-vui-popup__body{width:65vw}.cx-vui-popup.export-popup .cx-vui-popup__footer{justify-content:space-between}.cx-vui-popup.export-popup .footer-counter{display:flex;gap:1em}",""]);const l=i},740:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(168),n=r.n(s),o=r(814),i=r.n(o)()(n());i.push([e.id,".wrapper[data-v-0424b051]{display:flex;gap:1em;align-items:center}",""]);const l=i},814:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",s=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),s&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),s&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,s,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(s)for(var l=0;l<this.length;l++){var a=this[l][0];null!=a&&(i[a]=!0)}for(var u=0;u<e.length;u++){var d=[].concat(e[u]);s&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),t.push(d))}},t}},168:e=>{"use strict";e.exports=function(e){return e[1]}},293:(e,t,r)=>{var s=r(323);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,r(233).A)("7c3c32d4",s,!1,{})},79:(e,t,r)=>{var s=r(977);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,r(233).A)("2cca456e",s,!1,{})},806:(e,t,r)=>{var s=r(740);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,r(233).A)("547b2aec",s,!1,{})},233:(e,t,r)=>{"use strict";function s(e,t){for(var r=[],s={},n=0;n<t.length;n++){var o=t[n],i=o[0],l={id:e+":"+n,css:o[1],media:o[2],sourceMap:o[3]};s[i]?s[i].parts.push(l):r.push(s[i]={id:i,parts:[l]})}return r}r.d(t,{A:()=>m});var n="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!n)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},i=n&&(document.head||document.getElementsByTagName("head")[0]),l=null,a=0,u=!1,d=function(){},c=null,p="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,r,n){u=r,c=n||{};var i=s(e,t);return v(i),function(t){for(var r=[],n=0;n<i.length;n++){var l=i[n];(a=o[l.id]).refs--,r.push(a)}for(t?v(i=s(e,t)):i=[],n=0;n<r.length;n++){var a;if(0===(a=r[n]).refs){for(var u=0;u<a.parts.length;u++)a.parts[u]();delete o[a.id]}}}}function v(e){for(var t=0;t<e.length;t++){var r=e[t],s=o[r.id];if(s){s.refs++;for(var n=0;n<s.parts.length;n++)s.parts[n](r.parts[n]);for(;n<r.parts.length;n++)s.parts.push(x(r.parts[n]));s.parts.length>r.parts.length&&(s.parts.length=r.parts.length)}else{var i=[];for(n=0;n<r.parts.length;n++)i.push(x(r.parts[n]));o[r.id]={id:r.id,refs:1,parts:i}}}}function _(){var e=document.createElement("style");return e.type="text/css",i.appendChild(e),e}function x(e){var t,r,s=document.querySelector("style["+p+'~="'+e.id+'"]');if(s){if(u)return d;s.parentNode.removeChild(s)}if(f){var n=a++;s=l||(l=_()),t=g.bind(null,s,n,!1),r=g.bind(null,s,n,!0)}else s=_(),t=F.bind(null,s),r=function(){s.parentNode.removeChild(s)};return t(e),function(s){if(s){if(s.css===e.css&&s.media===e.media&&s.sourceMap===e.sourceMap)return;t(e=s)}else r()}}var h,b=(h=[],function(e,t){return h[e]=t,h.filter(Boolean).join("\n")});function g(e,t,r,s){var n=r?"":s.css;if(e.styleSheet)e.styleSheet.cssText=b(t,n);else{var o=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function F(e,t){var r=t.css,s=t.media,n=t.sourceMap;if(s&&e.setAttribute("media",s),c.ssrId&&e.setAttribute(p,t.id),n&&(r+="\n/*# sourceURL="+n.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={id:s,exports:{}};return e[s](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("FormBuilderPage",{attrs:{title:e.__("JetFormBuilder Form Records","jet-form-builder")},scopedSlots:e._u([{key:"heading-after",fn:function(){return[r("ExportEntriesButton")]},proxy:!0}])},[e._v(" "),r("ActionsWithFilters",{scopedSlots:e._u([{key:"filters",fn:function(){return[r("FormFilter"),e._v(" "),r("StatusFilter"),e._v(" "),r("DatesFilter")]},proxy:!0},{key:"buttons",fn:function(){return[r("ClearFiltersButton")]},proxy:!0}])}),e._v(" "),r("TablePagination"),e._v(" "),r("EntriesTable"),e._v(" "),r("TablePagination")],1)};e._withStripped=!0;var t=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CxVuiSelect",{attrs:{value:e.filter.selected},on:{input:e.onChangeFilter}},[r("option",{attrs:{value:""}},[e._v(e._s(e.__("All forms","jet-form-builder")))]),e._v(" "),e._l(e.filter.options||[],(function(t){return r("option",{domProps:{value:t.value}},[e._v("\n\t\t"+e._s(t.label)+"\n\t")])}))],2)};t._withStripped=!0;const{mapState:s,mapGetters:n,mapMutations:o,mapActions:i}=Vuex,{FilterMixin:l,i18n:a}=JetFBMixins,{ColumnWrapper:u,CxVuiSelect:d}=JetFBComponents;function c(e,t,r,s,n,o,i,l){var a,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=r,u._compiled=!0),s&&(u.functional=!0),o&&(u._scopeId="data-v-"+o),i?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=a):n&&(a=l?function(){n.call(this,(u.functional?this.parent:this).$root.$options.shadowRoot)}:n),a)if(u.functional){u._injectStyles=a;var d=u.render;u.render=function(e,t){return a.call(t),d(e,t)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,a):[a]}return{exports:e,options:u}}const p=c({name:"FormFilter",components:{ColumnWrapper:u,CxVuiSelect:d},data:()=>({filter_id:"form"}),mixins:[l,a]},t,[],!1,null,null,null).exports;var f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"inline-block"}},[r("cx-vui-button",{attrs:{"button-style":"link-accent",size:"mini"},on:{click:e.onClick},scopedSlots:e._u([{key:"label",fn:function(){return[r("span",{staticClass:"dashicons dashicons-database-export"}),e._v("\n\t\t\t"+e._s(e.__("Export","jet-form-builder"))+"\n\t\t")]},proxy:!0}])}),e._v(" "),e.showPopup?r("CxVuiPopup",{attrs:{"class-names":{"export-popup":!0,"sticky-footer":!0}},on:{close:function(t){e.showPopup=!1}},scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.__("1. Select Form:","jet-form-builder")))]},proxy:!0},{key:"content",fn:function(){return[r("RowWrapper",{attrs:{"element-id":"form","class-names":{"size--1-x-2":!0,"padding-side-unset":!0}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Choose form","jet-form-builder")))]},proxy:!0},{key:"default",fn:function(){return[r("CxVuiSelect",{attrs:{value:e.selectedForm,"class-names":{fullwidth:!0}},on:{input:e.setForm}},[r("option",{attrs:{disabled:"",value:""}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.__("You need to select form","jet-form-builder"))+"\n\t\t\t\t\t\t")]),e._v(" "),e._l(e.formFilter.options||[],(function(t){return r("option",{domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t")])}))],2)]},proxy:!0}],null,!1,1377539951)}),e._v(" "),e.selectedForm?[r("h3",[e._v(e._s(e.__("2. Select data to export:","jet-form-builder")))]),e._v(" "),r("Delimiter"),e._v(" "),r("RowWrapper",{attrs:{"element-id":"fields","class-names":{"size--1-x-2":!0,"padding-side-unset":!0},state:e.fieldState},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Choose fields","jet-form-builder")))]},proxy:!0},{key:"default",fn:function(){return[r("CxVuiFSelect",{attrs:{"options-list":e.currentFields,multiple:!0,value:e.selectedFields,placeholder:e.placeholder,disabled:e.isLoading("fields")||1===e.currentFields.length},on:{change:e.updateSelectedFields}})]},proxy:!0},{key:"actions",fn:function(){return[r("cx-vui-button",{attrs:{"button-style":"link-accent",size:"link",tagName:"a",disabled:e.currentFieldsValues.length===e.selectedFields.length},on:{click:e.selectAllFields},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.__("Choose all","jet-form-builder"))+"\n\t\t\t\t\t\t\t")]},proxy:!0}],null,!1,1960295587)}),e._v(" "),r("cx-vui-button",{attrs:{"button-style":"link-error",size:"link",tagName:"a",disabled:!e.selectedFields.length},on:{click:e.clearAllFields},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.__("Clear","jet-form-builder"))+"\n\t\t\t\t\t\t\t")]},proxy:!0}],null,!1,860686534)})]},proxy:!0}],null,!1,3370655477)}),e._v(" "),r("Delimiter"),e._v(" "),r("RowWrapper",{attrs:{"element-id":"extra","class-names":{"size--1-x-2":!0,"padding-side-unset":!0},state:e.extraState},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Additional information","jet-form-builder")))]},proxy:!0},{key:"default",fn:function(){return[r("CxVuiFSelect",{attrs:{"wrapper-css":["jfb-padding-b-unset"],"options-list":e.extra,multiple:!0,value:e.selectedExtra},on:{change:e.updateSelectedExtra}})]},proxy:!0},{key:"actions",fn:function(){return[r("cx-vui-button",{attrs:{"button-style":"link-accent",size:"link",tagName:"a",disabled:e.extraValues.length===e.selectedExtra.length},on:{click:e.selectAllExtra},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.__("Choose all","jet-form-builder"))+"\n\t\t\t\t\t\t\t")]},proxy:!0}],null,!1,1960295587)}),e._v(" "),r("cx-vui-button",{attrs:{"button-style":"link-error",size:"link",tagName:"a",disabled:!e.removableSelectedExtra.length},on:{click:e.clearAllExtra},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.__("Clear","jet-form-builder"))+"\n\t\t\t\t\t\t\t")]},proxy:!0}],null,!1,860686534)})]},proxy:!0}],null,!1,1796410779)}),e._v(" "),r("h3",[e._v(e._s(e.__("3. Filter records:","jet-form-builder")))]),e._v(" "),r("Delimiter"),e._v(" "),r("RowWrapper",{attrs:{"element-id":"status","class-names":{"size--1-x-2":!0,"padding-side-unset":!0}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Status","jet-form-builder")))]},proxy:!0},{key:"default",fn:function(){return[r("CxVuiSelect",{attrs:{value:e.status,"class-names":{fullwidth:!0}},on:{input:e.setStatus}},e._l(e.statusFilter.options,(function(t){return r("option",{domProps:{value:t.value}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.label)+"\n\t\t\t\t\t\t\t")])})),0)]},proxy:!0}],null,!1,427993892)}),e._v(" "),r("Delimiter"),e._v(" "),r("div",{staticClass:"jfb-dates-wrapper"},[r("ColumnWrapper",{attrs:{"element-id":"date_from","class-names":{"padding-side-unset":!0}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Date from","jet-form-builder")))]},proxy:!0}],null,!1,1592935509)},[e._v(" "),r("CxVuiDate",{attrs:{value:e.dateFrom,"max-date":"now"},on:{input:e.setDateFrom}})],1),e._v(" "),r("ColumnWrapper",{attrs:{"element-id":"date_to","class-names":{"padding-side-unset":!0}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Date to","jet-form-builder")))]},proxy:!0}],null,!1,1583817400)},[e._v(" "),r("CxVuiDate",{attrs:{value:e.dateTo,"max-date":"now"},on:{input:e.setDateTo}})],1)],1)]:e._e()]},proxy:!0},{key:"footer",fn:function(){return[r("div",{staticClass:"footer-buttons"},[r("cx-vui-button",{attrs:{"button-style":"accent",size:"mini",disabled:!e.canBeExported},on:{click:e.startExport},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Export","jet-form-builder")))]},proxy:!0}],null,!1,2420192243)}),e._v(" "),r("cx-vui-button",{attrs:{size:"mini"},on:{click:function(t){e.showPopup=!1}},scopedSlots:e._u([{key:"label",fn:function(){return[e._v(e._s(e.__("Cancel","jet-form-builder")))]},proxy:!0}],null,!1,298029969)})],1),e._v(" "),r("div",{staticClass:"footer-counter"},[r("div",{staticClass:"footer-counter--message"},[e._v("\n\t\t\t\t\t"+e._s(e.countMessage)+"\n\t\t\t\t")]),e._v(" "),r("cx-vui-button",{attrs:{"button-style":"link-accent",size:"link",tagName:"a",disabled:e.isLoading("count"),loading:e.isLoading("count")},on:{click:e.onClickUpdateCount},scopedSlots:e._u([{key:"label",fn:function(){return[e._v("\n\t\t\t\t\t\t"+e._s(e.__("Update","jet-form-builder"))+"\n\t\t\t\t\t")]},proxy:!0}],null,!1,168407598)})],1)]},proxy:!0}],null,!1,4224920487)}):e._e()],1)};f._withStripped=!0;const{__:m,sprintf:v}=wp.i18n,{i18n:_,ScopeStoreMixin:x,GetIncoming:h}=JetFBMixins,{mapState:b,mapGetters:g,mapMutations:F,mapActions:y}=Vuex,{RowWrapper:C,ColumnWrapper:S,CxVuiPopup:w,CxVuiFSelect:E,CxVuiDate:j,Delimiter:k,CxVuiSelect:B}=JetFBComponents,{export_url:A}=window.JetFBPageConfig,{addQueryArgs:P}=JetFBActions,D={name:"ExportEntriesButton",components:{RowWrapper:C,ColumnWrapper:S,CxVuiPopup:w,CxVuiFSelect:E,CxVuiDate:j,Delimiter:k,CxVuiSelect:B},props:{label:{type:String}},data:()=>({showPopup:!1}),mixins:[x,_],computed:{...g(["export/selectedForm","export/currentFields","export/selectedFields","export/isLoading","export/currentFieldsValues","export/extra","export/extraValues","export/selectedExtra","export/statusesList","export/status","export/dateFrom","export/dateTo","export/removableSelectedExtra","export/filtersObj","export/count"]),formFilter(){return this.getter("getFilter","form")},statusFilter(){return this.getter("getFilter","status")},currentFields(){return jfbEventBus.reactiveCounter,this["export/currentFields"]},selectedFields(){var e;return jfbEventBus.reactiveCounter,null!==(e=this["export/selectedFields"])&&void 0!==e?e:[]},selectedForm(){var e;return jfbEventBus.reactiveCounter,null!==(e=this["export/selectedForm"])&&void 0!==e?e:""},currentFieldsValues(){return jfbEventBus.reactiveCounter,this["export/currentFieldsValues"]},placeholder(){return this.selectedFields.length>0?"":m("Please select one or many fields","jet-form-builder")},extra(){return jfbEventBus.reactiveCounter,this["export/extra"]},extraValues(){return jfbEventBus.reactiveCounter,this["export/extraValues"]},selectedExtra(){return jfbEventBus.reactiveCounter,this["export/selectedExtra"]},status(){return jfbEventBus.reactiveCounter,this["export/status"]},statusesList(){return jfbEventBus.reactiveCounter,this["export/statusesList"]},dateFrom(){return jfbEventBus.reactiveCounter,this["export/dateFrom"]},dateTo(){return jfbEventBus.reactiveCounter,this["export/dateTo"]},removableSelectedExtra(){return jfbEventBus.reactiveCounter,this["export/removableSelectedExtra"]},countMessage(){return v(m("%d items can be exported","jet-form-builder"),this.count)},count(){return jfbEventBus.reactiveCounter,this["export/count"]},isEmptyProperties(){return!this.selectedFields?.length&&!this.selectedExtra?.length},canBeExported(){return this.selectedForm&&!this.isLoading()&&!this.isEmptyProperties&&this.count>0},fieldState(){return this.isLoading("fields")?{type:"loading",message:m("Loading...","jet-form-builder")}:this.isEmptyProperties?{type:"warning-danger",message:m("Please fill this field","jet-form-builder")}:""},extraState(){return this.isEmptyProperties?{type:"warning-danger",message:m("Please fill this field","jet-form-builder")}:""},filtersObj(){return jfbEventBus.reactiveCounter,this["export/filtersObj"]},iframeSrc(){return P({fields:this.selectedFields,extra:this.selectedExtra,filters:this.filtersObj},A)}},methods:{...F("export",["setForm","updateSelectedFields","updateSelectedExtra","setStatus","setDateFrom","setDateTo"]),...y("export",["resolveFields","selectAllFields","clearAllFields","selectAllExtra","clearAllExtra","resolveCount"]),onClick(){this.showPopup=!0,this.resolveFields()},onClickUpdateCount(){this.resolveCount()},startExport(){window.location=this.iframeSrc},isLoading(e){return this["export/isLoading"](e)}}};r(79);const V=c(D,f,[],!1,null,null,null).exports;var T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("DateFromFilter"),e._v("\n\tâ€”\n\t"),r("DateToFilter")],1)};T._withStripped=!0;var M=function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{staticClass:"cx-vui-input size-fullwidth",attrs:{type:"date",max:e.now},domProps:{value:e.filter.selected},on:{input:function(t){return e.onChangeFilter(t.target.value)}}})};M._withStripped=!0;const{ColumnWrapper:N}=JetFBComponents,{i18n:L,FilterMixin:W}=JetFBMixins;let O=new Date(Date.now()-864e4).toJSON();[O]=O.split("T");const J=c({name:"DateFromFilter",components:{ColumnWrapper:N},data:()=>({filter_id:"date_from",now:O}),mixins:[L,W]},M,[],!1,null,null,null).exports;var R=function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{staticClass:"cx-vui-input size-fullwidth",attrs:{type:"date",max:e.now},domProps:{value:e.filter.selected},on:{input:function(t){return e.onChangeFilter(t.target.value)}}})};R._withStripped=!0;const{RowWrapper:U,ColumnWrapper:z}=JetFBComponents,{i18n:I,FilterMixin:$}=JetFBMixins;let G=new Date(Date.now()-864e4).toJSON();[G]=G.split("T");const Q={name:"DatesFilter",components:{DateToFilter:c({name:"DateToFilter",components:{ColumnWrapper:z},data:()=>({filter_id:"date_to",now:G}),mixins:[I,$]},R,[],!1,null,null,null).exports,DateFromFilter:J}};r(806);const X=c(Q,T,[],!1,null,"0424b051",null).exports;var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("CxVuiSelect",{attrs:{value:e.filter.selected},on:{input:e.onChangeFilter}},e._l(e.filter.options||[],(function(t){return r("option",{domProps:{value:t.value}},[e._v("\n\t\t"+e._s(t.label)+"\n\t")])})),0)};q._withStripped=!0;const{__:H}=wp.i18n,{mapState:K,mapGetters:Y,mapMutations:Z,mapActions:ee}=Vuex,{FilterMixin:te,i18n:re}=JetFBMixins,{ColumnWrapper:se,CxVuiSelect:ne}=JetFBComponents,oe=c({name:"StatusFilter",components:{ColumnWrapper:se,CxVuiSelect:ne},data:()=>({filter_id:"status"}),created(){this.setCurrentFilter({options:[{value:"",label:H("All statuses","jet-form-builder")},{value:"success",label:H("Only successful ones","jet-form-builder")},{value:"failed",label:H("Only failed ones","jet-form-builder")}]})},mixins:[te,re]},q,[],!1,null,null,null).exports,{TablePagination:ie,EntriesTable:le,FormBuilderPage:ae,ActionsWithFilters:ue,ClearFiltersButton:de}=JetFBComponents,{i18n:ce,PromiseWrapper:pe}=JetFBMixins,{CHOOSE_ACTION:fe,CLICK_ACTION:me}=JetFBConst,{apiFetch:ve}=wp,{mapMutations:_e,mapState:xe,mapActions:he,mapGetters:be}=Vuex,ge={name:"jfb-records",components:{StatusFilter:oe,DatesFilter:X,TablePagination:ie,EntriesTable:le,ActionsWithFilters:ue,FormBuilderPage:ae,FormFilter:p,ClearFiltersButton:de,ExportEntriesButton:V},mixins:[ce,pe],created(){this.setActionPromises({action:"delete",promise:this.promiseWrapper(this.deleteAction.bind(this))}),this.setActionPromises({action:"mark_viewed",promise:this.promiseWrapper(this.viewAction.bind(this))}),this.setActionPromises({action:"mark_not_viewed",promise:this.promiseWrapper(this.viewAction.bind(this))})},methods:{..._e(["toggleDoingAction"]),..._e("scope-default",["setList","setActionPromises","setBeforeAction"]),...he("scope-default",["updateList","apiFetch"]),deleteAction({resolve:e,reject:t}){this.apiFetch().then((t=>{this.updateList(t),e(t.message)})).catch(t)},viewAction({resolve:e,reject:t}){this.apiFetch().then((t=>{this.setList(t.list),e(t.message)})).catch(t)}}};r(293);const Fe=c(ge,e,[],!1,null,null,null).exports,{__:ye}=wp.i18n,{load_fields_endpoint:Ce,counter_endpoint:Se}=window.JetFBPageConfig,{resolveRestUrl:we,addQueryArgs:Ee}=JetFBActions,je={extra:e=>e.extra,extraValues:e=>je.extra(e).map((({value:e})=>e)),selectedExtra:e=>e.selectedExtra,selectedForm:e=>e.form,currentFields:e=>{var t;return null!==(t=e.fields?.[e.form])&&void 0!==t?t:[]},currentFieldsValues:e=>je.currentFields(e).map((({value:e})=>e)),selectedFields:e=>e.selectedFields||[],isLoading:e=>t=>{var r;return t?null!==(r=e.loading?.[t])&&void 0!==r&&r:Object.values(e.loading).some(Boolean)},status:e=>e.status,statusesList:e=>e.statusesList,dateFrom:e=>e.date_from,dateTo:e=>e.date_to,removableSelectedExtra:e=>e.extra.filter((({value:t,nonRemovable:r})=>e.selectedExtra.includes(t)&&!r)),count:e=>e.count,filtersObj:e=>({form:e.form,status:e.status,date_from:e.date_from,date_to:e.date_to})},ke=[{value:"id",label:ye("ID (primary)","jet-form-builder")},{value:"form_id",label:ye("Form ID","jet-form-builder")},{value:"user_id",label:ye("User ID","jet-form-builder")},{value:"from_content_id",label:ye("From content ID","jet-form-builder")},{value:"from_content_type",label:ye("From content type","jet-form-builder")},{value:"status",label:ye("Status","jet-form-builder")},{value:"ip_address",label:ye("IP address","jet-form-builder")},{value:"user_agent",label:ye("User agent","jet-form-builder")},{value:"referrer",label:ye("Referrer","jet-form-builder")},{value:"submit_type",label:ye("Submit type","jet-form-builder")},{value:"is_viewed",label:ye("Is viewed","jet-form-builder")},{value:"created_at",label:ye("Created","jet-form-builder")},{value:"updated_at",label:ye("Updated","jet-form-builder")}],Be={namespaced:!0,state:()=>({form:"",selectedFields:[],selectedExtra:ke.map((({value:e})=>e)),status:"",date_from:"",date_to:"",fields:{},extra:ke,loading:{},count:0}),mutations:{setForm(e,t){e.form=t},setFields(e,t){e.fields={...e.fields,[e.form]:t}},setStatus(e,t){e.status=t},setDateFrom(e,t){e.date_from=t},setDateTo(e,t){e.date_to=t},updateSelectedFields(e,t){e.selectedFields=t},updateSelectedExtra(e,t){e.selectedExtra=t},toggleLoading(e,t){var r;e.loading={...e.loading,[t]:!(null!==(r=e.loading?.[t])&&void 0!==r&&r)}},setCount(e,t){e.count=t}},getters:je,actions:{handleFilters({commit:e,state:t,rootGetters:r}){const s=r["scope-default/getFilter"],n=s("form"),o=s("date_from"),i=s("date_to"),l=s("status");n.selected!==t.form&&e("setForm",n.selected),o.selected!==t.date_from&&e("setDateFrom",o.selected),i.selected!==t.date_to&&e("setDateTo",i.selected),l.selected!==t.status&&e("setStatus",l.selected)},async resolveFields({state:e,commit:t,dispatch:r}){if(e.fields.hasOwnProperty(e.form)||Number.isNaN(Number(e.form))||!e.form)return!0;let s;t("toggleLoading","fields");try{s=await r("fetchFormFields")}finally{t("toggleLoading","fields")}t("setFields",s.fields)},fetchFormFields({commit:e,state:t}){if(Number.isNaN(Number(t.form)))throw new Error("empty_form");const r=we(Ce.url,{id:t.form});return wp.apiFetch({...Ce,url:r})},selectAllFields({commit:e,getters:t}){e("updateSelectedFields",t.currentFieldsValues)},clearAllFields({commit:e}){e("updateSelectedFields",[])},selectAllExtra({commit:e,getters:t}){e("updateSelectedExtra",t.extraValues)},clearAllExtra({commit:e,getters:t}){e("updateSelectedExtra",t.extra.filter((({nonRemovable:e})=>e)).map((({value:e})=>e)))},async resolveCount({state:e,commit:t,dispatch:r}){let s;t("toggleLoading","count");try{s=await r("fetchRecordsCount")}finally{t("toggleLoading","count")}t("setCount",s.total)},fetchRecordsCount({state:e,getters:t}){if(Number.isNaN(Number(e.form)))return{total:0};const r=Ee({filters:t.filtersObj},Se.url);return wp.apiFetch({...Se,url:r})}}},Ae=Be,{BaseStore:Pe,TableModulePlugin:De,TableSeedPlugin:Ve,MessagesPlugin:Te}=JetFBStore,{renderCurrentPage:Me}=window.JetFBActions;Me(Fe,{store:new Vuex.Store({...Pe,plugins:[De(),Ve(),Te,function(e){e.registerModule("export",Ae),e.subscribe(((t,r)=>{const s=t.type.split("/");switch(s.at(-1)){case"setFilter":case"clearSelectedFilters":return void e.dispatch("export/handleFilters")}if("export"===s[0])switch(s.at(-1)){case"setStatus":case"setDateFrom":case"setDateTo":e.dispatch("export/resolveCount").then((()=>{}));break;case"setForm":e.dispatch("export/resolveCount").then((()=>{})),e.commit("export/updateSelectedFields",[]),e.dispatch("export/resolveFields").then((()=>{e.dispatch("export/selectAllFields")}))}}))}]})})})()})();