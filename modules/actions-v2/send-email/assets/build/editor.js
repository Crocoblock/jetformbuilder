(()=>{"use strict";const e=window.React,t=window.wp.i18n,n=window.wp.components,l=window.jfb.components,r=window.jfb.actions,o=[{value:"",label:"--"},{value:"admin",label:(0,t.__)("Admin email","jet-form-builder")},{value:"form",label:(0,t.__)("Email from submitted form field","jet-form-builder")},{value:"custom",label:(0,t.__)("Custom email","jet-form-builder")}],a=function({settings:a,onChangeSettingObj:i}){const{hasError:m,setShowError:c}=(0,r.useActionValidatorProvider)({isSupported:e=>"mail_to"===e?.property});return(0,e.createElement)(l.RowControl,null,(({id:r})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.RequiredLabel,{htmlFor:r},(0,t.__)("Mail To","jet-form-builder")),(0,e.createElement)(l.RowControlEnd,{hasError:m},(0,e.createElement)(n.SelectControl,{id:r,value:a.mail_to,options:o,onChange:e=>i({mail_to:e}),onBlur:()=>c(!0),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})))))};var i=function(){const e=Array.prototype.slice.call(arguments).filter(Boolean),t={},n=[];e.forEach((e=>{(e?e.split(" "):[]).forEach((e=>{if(e.startsWith("atm_")){const[,n]=e.split("_");t[n]=e}else n.push(e)}))}));const l=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&l.push(t[e]);return l.push(...n),l.join(" ")};const m=function({settings:o,onChangeSettingObj:a}){const{hasError:m,setShowError:c}=(0,r.useActionValidatorProvider)({isSupported:e=>"custom_email"===e?.property});return(0,e.createElement)(l.RowControl,null,(({id:r})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.RequiredLabel,{htmlFor:r},(0,t.__)("Email Address","jet-form-builder")),(0,e.createElement)(n.Flex,{className:i(l.RowControlEndStyle,m&&l.ControlWithErrorStyle),direction:"column"},m&&(0,e.createElement)(l.IconText,null,(0,t.__)("Please fill this required field","jet-form-builder")),(0,e.createElement)(n.TextControl,{id:r,value:o.custom_email,onChange:e=>a({custom_email:e}),onBlur:()=>c(!0),help:(0,t.__)("To apply multiple mailing addresses, separate them with commas","jet-form-builder"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})))))},c=window.jfb.blocksToActions,s=function({settings:o,onChangeSettingObj:a}){const m=(0,c.useFields)({withInner:!1}),{hasError:s,setShowError:u}=(0,r.useActionValidatorProvider)({isSupported:e=>"from_field"===e?.property});return(0,e.createElement)(l.RowControl,null,(({id:r})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.RequiredLabel,{htmlFor:r},(0,t.__)("From field","jet-form-builder")),(0,e.createElement)(n.Flex,{className:i(l.RowControlEndStyle,s&&l.ControlWithErrorStyle),direction:"column"},s&&(0,e.createElement)(l.IconText,null,(0,t.__)("Please fill this required field","jet-form-builder")),(0,e.createElement)(n.SelectControl,{id:r,value:o.from_field,options:[{value:"",label:"--"},...m],onChange:e=>a({from_field:e}),onBlur:()=>u(!0),help:(0,t.__)('To apply multiple mailing addresses, you can select a "Checkbox Field" or a "Select field" with enabled "Is multiple" option.',"jet-form-builder"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})))))},u=[{value:"",label:"--"},{value:"form",label:(0,t.__)("Email from submitted form field","jet-form-builder")},{value:"custom",label:(0,t.__)("Custom email","jet-form-builder")}],d=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(l.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Label,{htmlFor:a},(0,t.__)("Reply To","jet-form-builder")),(0,e.createElement)(n.SelectControl,{id:a,value:r.reply_to,options:u,onChange:e=>o({reply_to:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:_}=JetFBComponents,g=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(l.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.LabelWithActions,null,(0,e.createElement)(l.Label,{htmlFor:a},(0,t.__)("Reply to Email Address","jet-form-builder")),(0,e.createElement)(_,{onClick:e=>{var t;return o({reply_to_email:(null!==(t=r.reply_to_email)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(n.TextControl,{id:a,value:r.reply_to_email,onChange:e=>o({reply_to_email:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},E=function({settings:r,onChangeSettingObj:o}){const a=(0,c.useFields)({withInner:!1});return(0,e.createElement)(l.RowControl,null,(({id:i})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Label,{htmlFor:i},(0,t.__)("Reply To Email From Field","jet-form-builder")),(0,e.createElement)(n.SelectControl,{id:i,value:r.reply_from_field,options:[{value:"",label:"--"},...a],onChange:e=>o({reply_from_field:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:h}=JetFBComponents,p=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(l.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.LabelWithActions,null,(0,e.createElement)(l.Label,{htmlFor:a},(0,t.__)("Subject","jet-form-builder")),(0,e.createElement)(h,{onClick:e=>{var t;return o({subject:(null!==(t=r.subject)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(n.TextControl,{id:a,value:r.subject,onChange:e=>o({subject:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:f}=JetFBComponents,b=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(l.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.LabelWithActions,null,(0,e.createElement)(l.Label,{htmlFor:a},(0,t.__)("From Name","jet-form-builder")),(0,e.createElement)(f,{onClick:e=>{var t;return o({from_name:(null!==(t=r.from_name)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(n.TextControl,{id:a,value:r.from_name,onChange:e=>o({from_name:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:C}=JetFBComponents,j=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(l.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.LabelWithActions,null,(0,e.createElement)(l.Label,{htmlFor:a},(0,t.__)("From Email Address","jet-form-builder")),(0,e.createElement)(C,{onClick:e=>{var t;return o({from_address:(null!==(t=r.from_address)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(n.TextControl,{id:a,value:r.from_address,onChange:e=>o({from_address:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},S=[{value:"",label:"--"},{value:"text/plain",label:(0,t.__)("Plain text","jet-form-builder")},{value:"text/html",label:(0,t.__)("HTML","jet-form-builder")}],x=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(l.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.Label,{htmlFor:a},(0,t.__)("Content type","jet-form-builder")),(0,e.createElement)(n.SelectControl,{id:a,value:r.content_type,options:S,onChange:e=>o({content_type:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:w}=JetFBComponents,F=function({settings:o,onChangeSettingObj:a}){const{hasError:i,setShowError:m}=(0,r.useActionValidatorProvider)({isSupported:e=>"content"===e?.property});return(0,e.createElement)(l.RowControl,null,(({id:r})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.LabelWithActions,null,(0,e.createElement)(l.RequiredLabel,{htmlFor:r},(0,t.__)("Content","jet-form-builder")),(0,e.createElement)(w,{onClick:e=>{var t;return a({content:(null!==(t=o.content)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(l.RowControlEnd,{hasError:i},(0,e.createElement)(n.TextareaControl,{id:r,value:o.content,onChange:e=>a({content:e}),onBlur:()=>m(!0),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})))))},y=function({settings:n,onChangeSettingObj:r}){const o=(0,c.useFields)();return(0,e.createElement)(l.RowControl,{createId:!1},(0,e.createElement)(l.Label,null,(0,t.__)("Attachments","jet-form-builder")),(0,e.createElement)(l.FormLabeledTokenField,{label:(0,t.__)("Add form field with attachment","jet-form-builder"),value:n.attachments,suggestions:o,onChange:e=>r({attachments:[...new Set(e)]}),__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))},v={type:"send_email",label:(0,t.__)("Send Email","jet-form-builder"),edit:function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(n.Flex,{direction:"column"},(0,e.createElement)(a,{settings:r,onChangeSettingObj:o}),"custom"===r.mail_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.WideLine,null),(0,e.createElement)(m,{settings:r,onChangeSettingObj:o})),"form"===r.mail_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.WideLine,null),(0,e.createElement)(s,{settings:r,onChangeSettingObj:o})),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(d,{settings:r,onChangeSettingObj:o}),"custom"===r.reply_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.WideLine,null),(0,e.createElement)(g,{settings:r,onChangeSettingObj:o})),"form"===r.reply_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.WideLine,null),(0,e.createElement)(E,{settings:r,onChangeSettingObj:o})),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(p,{settings:r,onChangeSettingObj:o}),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(b,{settings:r,onChangeSettingObj:o}),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(j,{settings:r,onChangeSettingObj:o}),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(x,{settings:r,onChangeSettingObj:o}),Boolean(!r.content_type||"text/html"===r.content_type)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.WideLine,null),(0,e.createElement)(n.ToggleControl,{className:l.ClearBaseControlStyle,label:(0,t.__)("Disable Auto-Formatting","jet-form-builder"),checked:r.disable_format,onChange:e=>o({disable_format:e}),help:(0,t.__)("By default, each new line in the email content field is changed to a separate paragraph element. And each link turns into a clickable hyperlink. To prevent this, enable this option.","jet-form-builder")})),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(F,{settings:r,onChangeSettingObj:o}),(0,e.createElement)(l.WideLine,null),(0,e.createElement)(y,{settings:r,onChangeSettingObj:o}))},icon:(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)("rect",{x:"0",fill:"none",width:"20",height:"20"}),(0,e.createElement)("g",null,(0,e.createElement)("path",{d:"M19 14.5v-9c0-.83-.67-1.5-1.5-1.5H3.49c-.83 0-1.5.67-1.5 1.5v9c0 .83.67 1.5 1.5 1.5H17.5c.83 0 1.5-.67 1.5-1.5zm-1.31-9.11c.33.33.15.67-.03.84L13.6 9.95l3.9 4.06c.12.14.2.36.06.51-.13.16-.43.15-.56.05l-4.37-3.73-2.14 1.95-2.13-1.95-4.37 3.73c-.13.1-.43.11-.56-.05-.14-.15-.06-.37.06-.51l3.9-4.06-4.06-3.72c-.18-.17-.36-.51-.03-.84s.67-.17.95.07l6.24 5.04 6.25-5.04c.28-.24.62-.4.95-.07z"}))),docHref:"https://jetformbuilder.com/features/send-email/",category:"communication",validators:[({settings:e})=>!e?.mail_to&&{type:"empty",property:"mail_to"},({settings:e})=>!e?.content&&{type:"empty",property:"content"},({settings:e})=>"custom"===e?.mail_to&&!e?.custom_email&&{type:"empty",property:"custom_email"},({settings:e})=>"form"===e?.mail_to&&!e?.from_field&&{type:"empty",property:"from_field"}]};(0,r.registerAction)(v)})();