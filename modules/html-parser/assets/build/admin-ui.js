(()=>{"use strict";var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const e=window.wp.element,n=window.wp.domReady;var r=t.n(n);const o=window.React,a=window.wp.components,l=window.wp.i18n,i=window.wp.apiFetch;var s=t.n(i);function c({name:t,attributes:e}){return`\x3c!-- wp:${t} ${JSON.stringify(e)} /--\x3e`}const{parseHTMLtoBlocks:m}=JetFormBuilderParser;function d({clearHTML:t,rawHTML:e,setShowModal:n}){return(0,o.createElement)(a.Flex,{justify:"space-between"},(0,o.createElement)(a.Button,{variant:"secondary",onClick:t},(0,l.__)("Back","jet-form-builder")),(0,o.createElement)(a.Button,{variant:"primary",onClick:async()=>{try{const t=m(e);if(!t.length)return void console.error((0,l.__)("JFB: Could not parse blocks","jet-form-builder"),e);const n=function(t){return t.map(c).join("\n\n")}(t),r=await s()({method:"POST",path:"/wp/v2/jet-form-builder",data:{title:(0,l.__)("Imported HTML Form","jet-form-builder"),content:n,status:"publish"}});window.location.href=function(t){const e=new URL(window.location.origin+"/wp-admin/post.php");return e.searchParams.set("post",t),e.searchParams.set("action","edit"),e.href}(r.id)}catch(t){console.error("Failed to create form:",t)}}},(0,l.__)("Create Form","jet-form-builder")))}const{parseHTMLtoBlocks:u,getFormInnerFields:p}=JetFormBuilderParser;function f({setShowModal:t}){const[n,r]=(0,e.useState)(""),[i,s]=(0,e.useState)(""),[c,m]=(0,e.useState)(!1),[u,f]=(0,e.useState)("");return(0,o.createElement)(a.Modal,{style:{width:"60vw"},onRequestClose:()=>t(!1),title:(0,l.__)("Import HTML Form","jet-form-builder"),className:"jfb-html-parser-modal"},u&&(0,o.createElement)(a.Notice,{status:"error",isDismissible:!0,onRemove:()=>f("")},u),Boolean(i.length)?(0,o.createElement)(o.Fragment,null,(0,o.createElement)("div",{dangerouslySetInnerHTML:{__html:i},style:{padding:"2em 1em",backgroundColor:"#f6f7f7",marginBottom:"1em"}}),(0,o.createElement)(d,{clearHTML:()=>s(""),formHTML:i,rawHTML:n,setShowModal:t})):(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.TextareaControl,{label:(0,l.__)("Paste your HTML here","jet-form-builder"),value:n,onChange:r,rows:7}),(0,o.createElement)(a.Flex,{justify:"flex-end",style:{marginTop:"1em"}},(0,o.createElement)(a.Button,{isPrimary:!0,isBusy:c,disabled:c||!n.trim().length,onClick:()=>{m(!0),f("");try{const t=p(n);s(`\n\t\t\t<style>\n\t\t\t\ttextarea, input:not([type="checkbox"]):not([type="radio"]) {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t}\n\t\t\t\tlabel {\n\t\t\t\t\tdisplay:block;\n\t\t\t\t\tmargin-bottom:5px;\n\t\t\t\t}\n\t\t\t\tbr {\n\t\t\t\t\tdisplay:none;\n\t\t\t\t}\n\t\t\t\tinput[type="submit"], button {\n\t\t\t\t\tdisplay:block;\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t${t}\n\t\t`)}catch(t){console.error(t),f(t?.message||(0,l.__)("Failed to parse HTML.","jet-form-builder"))}finally{m(!1)}}},c?(0,l.__)("Parsing...","jet-form-builder"):(0,l.__)("Parse HTML","jet-form-builder")))))}function w(){const[t,n]=(0,e.useState)(!1);return(0,o.createElement)(e.Fragment,null,(0,o.createElement)("a",{href:"#",className:"page-title-action",onClick:t=>{t.preventDefault(),n(!0)}},(0,l.__)("Import from HTML","jet-form-builder")),t&&(0,o.createElement)(f,{setShowModal:n}))}r()((()=>{const t=document.querySelector('.page-title-action[href*="post-new.php"]');if(!t)return;const n=document.createElement("div");n.style.display="inline-flex",t.after(n),(0,e.createRoot)(n).render(wp.element.createElement(w))}))})();