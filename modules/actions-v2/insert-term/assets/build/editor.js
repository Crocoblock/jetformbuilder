(()=>{"use strict";const e=window.React,t=window.wp.components,o=window.wp.element,n=window.jfb.actions,{ActionFieldsMapContext:r,CurrentPropertyMapContext:l}=JetFBComponents,i=function(){const{FieldSelect:i,property:a}=(0,o.useContext)(l),{source:s,setMapField:c,getMapField:m}=(0,o.useContext)(n.CurrentActionEditContext),{name:p,index:u}=(0,o.useContext)(r);return"term_meta"===a?(0,e.createElement)("div",{className:"components-base-control jet-margin-bottom-wrapper"},i,(0,e.createElement)(t.TextControl,{key:p+u+"_text",value:m({name:p}),onChange:e=>c({nameField:p,value:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})):i},a=window.wp.hooks,s=window.jfb.components;var c=function(){const e=Array.prototype.slice.call(arguments).filter(Boolean),t={},o=[];e.forEach((e=>{(e?e.split(" "):[]).forEach((e=>{if(e.startsWith("atm_")){const[,o]=e.split("_");t[o]=e}else o.push(e)}))}));const n=[];for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.push(t[e]);return n.push(...o),n.join(" ")};const m=window.wp.i18n,p=window.jfb.blocksToActions,{convertListToFieldsMap:u}=JetFBActions,{ActionFieldsMap:d,WrapperRequiredControl:h,DynamicPropertySelect:w}=JetFBComponents,f=(0,a.applyFilters)("jet.fb.insert.term.modifiers",[{id:"all",isSupported:()=>!0}]),x=e=>{for(const t of f)if(t.isSupported(e))return t.id},E={type:"insert_term",label:(0,m.__)("Insert/Update Term","jet-form-builder"),edit:function(r){const{settings:l,onChangeSettingObj:a,source:f,help:E,label:y}=r,_=u((0,p.useFields)()),[g,v]=(0,o.useState)((()=>{var e;const t=x(l);return null!==(e=f.properties[t])&&void 0!==e?e:[]}));return(0,o.useEffect)((()=>{l.requestFields?.length&&a({requestFields:null})}),[]),(0,o.useEffect)((()=>{var e;const t=x(l);v(null!==(e=f.properties[t])&&void 0!==e?e:[])}),[l.taxonomy]),(0,p.useSanitizeFieldsMap)(),console.log(g),(0,e.createElement)(t.Flex,{direction:"column"},(0,e.createElement)(s.RowControl,null,(({id:o})=>(0,e.createElement)(n.ValidatorProvider,{isSupported:e=>"taxonomy"===e?.property},(({hasError:n,setShowError:r})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(s.RequiredLabel,{htmlFor:o},(0,m.__)("Taxonomy","jet-form-builder")),(0,e.createElement)(t.Flex,{className:c(s.RowControlEndStyle,n&&s.ControlWithErrorStyle),direction:"column"},n&&(0,e.createElement)(s.IconText,null,(0,m.__)("Please fill this required field","jet-form-builder")),(0,e.createElement)(t.SelectControl,{id:o,value:l.taxonomy,options:f.taxonomies,help:E("taxonomy"),onChange:e=>a({taxonomy:e}),onBlur:()=>r(!0),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))))),(0,e.createElement)(s.WideLine,null),(0,e.createElement)(d,{label:y("fields_map"),fields:_},(0,e.createElement)(h,null,(0,e.createElement)(w,{dynamic:["term_meta"],properties:g,parseValue:e=>"term_meta"},(0,e.createElement)(i,null)))))},icon:(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)("rect",{x:"0",fill:"none",width:"20",height:"20"}),(0,e.createElement)("g",null,(0,e.createElement)("path",{d:"M17 7V4h-2V2h-3v1H3v15h11V9h1V7h2zm-1-2v1h-2v2h-1V6h-2V5h2V3h1v2h2z"}))),category:"content",validators:[({settings:e})=>!e?.taxonomy&&{type:"empty",property:"taxonomy"}]};(0,n.registerAction)(E)})();