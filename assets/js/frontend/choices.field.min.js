(()=>{"use strict";function t(t){var e;return null==t||null===(e=t.classList)||void 0===e?void 0:e.contains("jet-form-builder-choice")}function e(t){return t.closest(".jet-form-builder-choice--item")}function r(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){c=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(c)throw a}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i=JetFormBuilderAbstract,o=i.InputData,a=i.ReactiveSet,u=JetFormBuilderFunctions.getParsedName;function c(){o.call(this),this.isSupported=t,this.setNode=function(t){this.nodes=t.querySelectorAll(".jet-form-builder-choice--item input"),this.rawName=this.nodes[0].name,this.name=u(this.rawName),this.inputType="choice"},this.setValue=function(){this.value.current=this.isArray()?this.getMultipleValue():this.getSingleValue()},this.addListeners=function(){var t,e=this,n=r(this.nodes);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.addEventListener("change",(function(){return e.setValue()})),this.addListenerForChoice(i)}}catch(t){n.e(t)}finally{n.f()}this.isArray()&&this.sanitize((function(t){return Array.isArray(t)?t:[t]}))},this.getMultipleValue=function(){return Array.from(this.nodes).filter((function(t){return t.checked})).map((function(t){return t.value}))},this.getSingleValue=function(){var t,e=r(this.nodes);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n.checked)return n.value}}catch(t){e.e(t)}finally{e.f()}return""},this.addListenerForChoice=function(t){var r=this,n=e(t);n.addEventListener("click",(function(e){return r.toggleChoice(t,e)})),t.classList.contains("jet-form-builder-choice--item-control-input")||n.addEventListener("keydown",(function(e){["Enter","Spacebar"," "].includes(e.key)&&(e.preventDefault(),r.toggleChoice(t))}))},this.toggleChoice=function(t,e){var r;"LABEL"!==(null==e||null===(r=e.target)||void 0===r?void 0:r.nodeName)&&(this.isArray()?this.value.toggle(t.value):this.value.current!==t.value?this.value.current=t.value:this.onClear())}}c.prototype=Object.create(o.prototype),c.prototype.getReactive=function(){return new a};const l=c;function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var f=JetFormBuilderAbstract.BaseSignal;function d(){f.call(this),this.isSupported=function(t,r){return!!e(t)},this.runSignal=function(){this.input.calcValue=0;var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(this.input.nodes);try{for(r.s();!(t=r.n()).done;){var n,i,o,a=t.value;a.checked=this.input.isArray()?null===(n=this.input.value.current)||void 0===n?void 0:n.includes(a.value):this.input.value.current===a.value;var u=e(a);u.classList.toggle("is-checked",a.checked),u.ariaPressed=a.checked,this.toggleImageControl(u,a.checked),a.checked&&(this.input.calcValue+=parseFloat(null!==(i=null===(o=a.dataset)||void 0===o?void 0:o.calculate)&&void 0!==i?i:a.value))}}catch(t){r.e(t)}finally{r.f()}}}d.prototype=Object.create(f.prototype),d.prototype.toggleImageControl=function(t,e){var r=t.querySelector(".jet-form-builder-choice--item-control-img");if(r){var n=e?r.dataset.srcChecked:r.dataset.srcDefault;r.src!==n&&(r.src=n)}};const h=d;function v(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=JetPlugins.hooks.addFilter;p("jet.fb.inputs","jet-form-builder/choices-field",(function(t){return[l].concat(v(t))})),p("jet.fb.signals","jet-form-builder/choices-field",(function(t){return[h].concat(v(t))}))})();