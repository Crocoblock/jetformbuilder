(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,o=window.wp.element,r=window.wp.blockEditor,l=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),s=e=>null==e||"string"==typeof e&&""===e.trim()||!(!Array.isArray(e)||0!==e.length)||!(!l(e)||0!==Object.keys(e).length),a=e=>!!s(e)||!!(l(e)&&Object.keys(e).length>0&&Object.values(e).every(e=>s(e))),n=window.wp.components,i=window.ReactJSXRuntime,c=({control:e,value:t,handleChange:o})=>(0,i.jsx)(n.TextControl,{label:e.label,value:t,onChange:e=>o(e),placeholder:e.placeholder,className:"crocoblock-style-manager__text-control",help:e.help,disabled:e.disabled,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),u=({control:e,value:t,handleChange:o})=>{let r=t;return void 0===r&&e.options&&(r=Object.keys(e.options)[0]),(0,i.jsx)(n.__experimentalToggleGroupControl,{label:e.label,value:t,onChange:o,isBlock:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,children:e.options&&Object.entries(e.options).map(([e,t])=>{var o=t.icon||!1;return o&&(o.includes("dashicons-")&&(o=o.replace("dashicons-","")),o=(0,i.jsx)(n.Dashicon,{icon:o})),o?(0,i.jsx)(n.__experimentalToggleGroupControlOptionIcon,{icon:o,value:e,label:t.label,"aria-label":t.label}):(0,i.jsx)(n.__experimentalToggleGroupControlOption,{value:e,label:t.label,"aria-label":t.label},e)})})},d=({control:e,value:t,handleChange:o})=>{const s=wp.data.select("core/block-editor").getSettings().colors,a=t||{},c=()=>void 0===e.hide_radius||!e.hide_radius,u=(e,t)=>{const r={...a};var s=!1;if(l(t)){const o=a[e]||{};"border"===e&&((t.color||t.style||t.width)&&(delete o.top,delete o.right,delete o.bottom,delete o.left,t.width&&!t.style?s="solid":t.style&&(s=t.style)),(t.top||t.right||t.bottom||t.left)&&((o.color||o.style||o.width)&&(t.top={...o,...t.top},t.right={...o,...t.right},t.bottom={...o,...t.bottom},t.left={...o,...t.left}),delete o.color,delete o.style,delete o.width),t.hasOwnProperty("style")&&t.hasOwnProperty("color")&&void 0===t.style&&void 0===t.color&&(delete t.style,delete t.color,delete t.width,delete o.width,delete o.style,delete o.color,s=!1)),s&&(t.style=s),r[e]={...o,...t}}else r[e]=t;!c()&&r.radius&&delete r.radius,o(r)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.BorderBoxControl,{label:e.label,value:a.border,onChange:e=>u("border",e),className:"crocoblock-style-manager__border-control crocoblock-style-manager__with-spacing",help:e.help,colors:s,enableStyle:!0,__experimentalIsRenderedInSidebar:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),c()&&(0,i.jsx)(r.__experimentalBorderRadiusControl,{label:"Radius",values:a.radius,value:a.radius,onChange:e=>u("radius",e),className:"crocoblock-style-manager__border-radius-control",__experimentalIsRenderedInSidebar:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})]})},h=({children:e,isOpen:t,onClose:o,label:r,anchor:l})=>{if(!t)return null;const s=(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16","aria-hidden":"true",focusable:"false",children:(0,i.jsx)("path",{d:"M12 13.06l3.712 3.713 1.061-1.06L13.061 12l3.712-3.712-1.06-1.06L12 10.938 8.288 7.227l-1.061 1.06L10.939 12l-3.712 3.712 1.06 1.061L12 13.061z"})});return(0,i.jsx)(n.Popover,{className:"crocoblock-style-manager__popover",placement:"left",onClose:o,shouldCloseOnClickOutside:!0,anchor:l,noArrow:!1,offset:10,children:(0,i.jsxs)("div",{className:"crocoblock-style-manager__popover",children:[(0,i.jsxs)("div",{className:"crocoblock-style-manager__popover-header",children:[r,(0,i.jsx)(n.Button,{className:"crocoblock-style-manager__popover-close",onClick:o,icon:s,label:"Close"})]}),(0,i.jsx)("div",{className:"crocoblock-style-manager__popover-content",children:e})]})})},p=({children:e,trigger:t,label:r})=>{const[l,s]=(0,o.useState)(null),[a,n]=(0,o.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{ref:s,onClick:()=>{n(!a)},children:t}),(0,i.jsx)(h,{anchor:l,label:r,isOpen:a,onClose:()=>{n(!1)},children:e})]})},m=({control:e,value:t,handleChange:o})=>{const r=wp.data.select("core/block-editor").getSettings().colors,l=(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M12 0c-3.31 0-6.291 1.353-8.459 3.522l-2.48-2.48-1.061 7.341 7.437-.966-2.489-2.488c1.808-1.808 4.299-2.929 7.052-2.929 5.514 0 10 4.486 10 10s-4.486 10-10 10c-3.872 0-7.229-2.216-8.89-5.443l-1.717 1.046c2.012 3.803 6.005 6.397 10.607 6.397 6.627 0 12-5.373 12-12s-5.373-12-12-12z"})}),s=(0,i.jsx)(n.BaseControl,{label:e.label,id:e.id,className:"crocoblock-style-manager__inline-control",__nextHasNoMarginBottom:!0,children:(0,i.jsxs)("div",{className:"crocoblock-style-manager__color-indicator crocoblock-style-manager__popover-trigger",children:[t&&(0,i.jsx)(n.Button,{className:"crocoblock-style-manager__popover-clear",onClick:e=>{e.stopPropagation(),o("")},"aria-label":"Reset ",icon:l}),(0,i.jsx)(n.ColorIndicator,{colorValue:t}),t&&(0,i.jsx)("span",{className:"crocoblock-style-manager__color-indicator-label",children:t})]})});return(0,i.jsxs)(p,{trigger:s,label:e.label,children:[(0,i.jsx)(n.ColorPicker,{onChange:e=>{o(e)},color:t,enableAlpha:!0}),(0,i.jsx)(n.Flex,{className:"crocoblock-style-manager__color-palette",justify:"flex-start",align:"center",direction:"row",wrap:!0,gap:2,children:r.map(e=>(0,i.jsx)(n.FlexItem,{className:"crocoblock-style-manager__color-palette-item",children:(0,i.jsx)(n.ColorIndicator,{colorValue:e.color,onClick:()=>{o(e.color)},className:{"crocoblock-style-manager__color-palette-item-indicator":!0,"crocoblock-style-manager__color-palette-item-indicator--active":e.color===t}})},e.slug))})]})},g=({control:e,value:t,handleChange:o})=>{const l=(0,i.jsx)("svg",{clipRule:"evenodd",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"m19 20.25c0-.402-.356-.75-.75-.75-2.561 0-11.939 0-14.5 0-.394 0-.75.348-.75.75s.356.75.75.75h14.5c.394 0 .75-.348.75-.75zm-7.403-3.398 9.124-9.125c.171-.171.279-.423.279-.684 0-.229-.083-.466-.28-.662l-3.115-3.104c-.185-.185-.429-.277-.672-.277s-.486.092-.672.277l-9.143 9.103c-.569 1.763-1.555 4.823-1.626 5.081-.02.075-.029.15-.029.224 0 .461.349.848.765.848.511 0 .991-.189 5.369-1.681zm-3.27-3.342 2.137 2.137-3.168 1.046zm.955-1.166 7.651-7.616 2.335 2.327-7.637 7.638z",fillRule:"nonzero"})}),s=[{label:"Default",value:""}];if(window?.crocoStyleEditorData?.fonts)for(const e of window?.crocoStyleEditorData?.fonts)s.push(e);const a=t||{},c=(e,t)=>{const r={...a,[e]:t};o(r)},u=[{a11yLabel:"Pixels (px)",label:"px",step:1,value:"px"},{a11yLabel:"Ems (em)",label:"em",step:.1,value:"em"},{a11yLabel:"Percent (%)",label:"%",step:1,value:"%"},{a11yLabel:"Rems (rem)",label:"rem",step:.1,value:"rem"}],d=e.label||"Typography",h=e=>!(e&&0!==Object.keys(e).length&&!Object.values(e).every(e=>!e)),m=(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M12 0c-3.31 0-6.291 1.353-8.459 3.522l-2.48-2.48-1.061 7.341 7.437-.966-2.489-2.488c1.808-1.808 4.299-2.929 7.052-2.929 5.514 0 10 4.486 10 10s-4.486 10-10 10c-3.872 0-7.229-2.216-8.89-5.443l-1.717 1.046c2.012 3.803 6.005 6.397 10.607 6.397 6.627 0 12-5.373 12-12s-5.373-12-12-12z"})}),g=(0,i.jsx)(n.BaseControl,{label:d,id:e.id,className:"crocoblock-style-manager__inline-control",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,children:(0,i.jsxs)("div",{className:"crocoblock-style-manager__typography-indicator crocoblock-style-manager__popover-trigger",children:[!h(a)&&(0,i.jsx)(n.Button,{className:"crocoblock-style-manager__popover-clear",onClick:e=>{e.stopPropagation(),o({})},"aria-label":"Reset",icon:m}),l,(e=>{if(h(e))return(0,i.jsx)("span",{className:"crocoblock-style-manager__typography-indicator-label",children:"Default"});const{family:t,size:o,weight:r,style:l,transform:s,decoration:a,letterSpacing:n}=e,c=[t||"Default",o,r,l,s,a].filter(Boolean).join(", ");return c?(0,i.jsx)("span",{className:"crocoblock-style-manager__typography-indicator-label",children:c}):(0,i.jsx)("span",{className:"crocoblock-style-manager__typography-indicator-label",children:"Default"})})(a)]})});return(0,i.jsx)(p,{trigger:g,label:d,children:(0,i.jsxs)("div",{className:"crocoblock-style-manager__typography-controls",children:[(0,i.jsx)(n.SelectControl,{label:"Font Family",value:a.family,onChange:e=>{c("family",e)},options:s,className:"crocoblock-style-manager__popover-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,i.jsxs)("div",{className:"crocoblock-style-manager__popover-control-text-row",children:["You can manage installed fonts ",(0,i.jsx)("a",{href:window?.crocoStyleEditorData?.fonts_manager_url,target:"_blank",children:"here"})]}),(0,i.jsxs)("div",{className:"crocoblock-style-manager__popover-controls-row",children:[(0,i.jsx)(n.__experimentalUnitControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:"Font Size",value:a.size,onChange:e=>{c("size",e)},units:u,allowEmpty:!0,className:"crocoblock-style-manager__popover-control w-50"}),(0,i.jsx)(n.__experimentalUnitControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:"Line Height",value:a.lineHeight,onChange:e=>{c("lineHeight",e)},units:u,allowEmpty:!0,className:"crocoblock-style-manager__popover-control w-50"})]}),(0,i.jsxs)("div",{className:"crocoblock-style-manager__popover-controls-row",children:[(0,i.jsx)("div",{className:"w-50",children:(0,i.jsx)(n.SelectControl,{label:"Font Weight",value:a.weight,onChange:e=>{c("weight",e)},options:[{label:"Default",value:""},{label:"Thin 100",value:"100"},{label:"Extra Light 200",value:"200"},{label:"Light 300",value:"300"},{label:"Regular 400",value:"400"},{label:"Medium 500",value:"500"},{label:"Semi Bold 600",value:"600"},{label:"Bold 700",value:"700"},{label:"Extra Bold 800",value:"800"},{label:"Black 900",value:"900"}],className:"crocoblock-style-manager__popover-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}),(0,i.jsx)("div",{className:"w-50",children:(0,i.jsx)(n.SelectControl,{label:"Font Style",value:a.style,onChange:e=>{c("style",e)},options:[{label:"Default",value:""},{label:"Normal",value:"normal"},{label:"Italic",value:"italic"},{label:"Oblique",value:"oblique"}],className:"crocoblock-style-manager__popover-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})})]}),(0,i.jsxs)("div",{className:"crocoblock-style-manager__popover-controls-row",children:[(0,i.jsx)("div",{className:"w-50",children:(0,i.jsx)(r.__experimentalTextTransformControl,{label:"Text Transform",value:a.transform,onChange:e=>{c("transform",e)},className:"crocoblock-style-manager__popover-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}),(0,i.jsx)("div",{className:"w-50",children:(0,i.jsx)(r.__experimentalTextDecorationControl,{label:"Text Decoration",value:a.decoration,onChange:e=>{c("decoration",e)},className:"crocoblock-style-manager__popover-control",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})})]}),(0,i.jsx)(n.__experimentalUnitControl,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,label:"Letter Spacing",value:a.letterSpacing,onChange:e=>{c("letterSpacing",e)},units:u,allowEmpty:!0,className:"crocoblock-style-manager__popover-control"})]})})},b=({control:e,value:t,handleChange:o})=>(0,i.jsx)(n.BoxControl,{label:e.label,values:t,value:t,onChange:e=>o(e),className:"crocoblock-style-manager__dimensions-control",__experimentalIsRenderedInSidebar:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),_=({control:e,value:t,handleChange:r})=>{const l=e=>e?parseFloat(e):0,s=t=>{let o=t;const r=e.min||0,a=e.max||100;if("number"==typeof o&&(o<r?o=r:o>a&&(o=a)),"object"==typeof o&&null!==o){let e="";for(const t in o)o.hasOwnProperty(t)&&(e+=s(o[t]));o=e}return!0===e.cut_units&&(o=l(o)),o},[a,c]=(0,o.useState)(s(t)),u=()=>{if(!0===e.cut_units)return"";if(a){const e=("number"==typeof a?a.toString():a).match(/[a-zA-Z%]+/);if(e&&e.length>0)return e[0]}return e.units&&e.units.length>0?e.units[0].value:""},d=e=>{const t=u();return t?`${e}${t}`:e};if(!e.units){const t=e.min||0,o=e.max||100;return(0,i.jsx)(n.RangeControl,{label:e.label,value:a,onChange:e=>{c(e),r(e)},placeholder:e.placeholder,className:"crocoblock-style-manager__text-control",help:e.help,min:t,max:o,disabled:e.disabled,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}return(0,i.jsx)(n.BaseControl,{label:e.label,help:e.help,className:"crocoblock-style-manager__range-control",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,children:(0,i.jsxs)(n.__experimentalHStack,{className:"crocoblock-style-manager__range-control__hstack",alignment:"center",children:[(0,i.jsx)("div",{style:{flex:"1 1 0%"},children:(0,i.jsx)(n.RangeControl,{value:l(a),onChange:e=>{c(d(e)),r(d(e))},placeholder:e.placeholder,className:"crocoblock-style-manager__text-control",withInputField:!1,min:(()=>{const t=u(),o=e.units.find(e=>e.value===t);return o&&o.intervals?o.intervals.min:0})(),max:(()=>{const t=u(),o=e.units.find(e=>e.value===t);return o&&o.intervals?o.intervals.max:100})(),__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})}),(0,i.jsx)("div",{style:{flex:"0 0 80px"},children:(0,i.jsx)(n.__experimentalUnitControl,{value:a,onChange:e=>{r(e),c(e)},units:(()=>{const t=[];if(e.units&&e.units.length>0)for(const o of e.units)t.push({value:o.value,label:o.label||o.value,default:o.default||0});return t})(),className:"crocoblock-style-manager__unit-control",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0})})]})})},x=({control:e,value:t,handleChange:o})=>(0,i.jsx)(n.ToggleControl,{label:e.label,checked:t,onChange:o,help:e.help,disabled:e.disabled,className:"crocoblock-style-manager__toggle-control"}),f=({control:e})=>e.content?(0,i.jsx)("h5",{className:"crocoblock-style-manager__heading-control",dangerouslySetInnerHTML:{__html:e.content}}):null,y=e=>(0,i.jsx)("div",{className:"crocoblock-style-manager__controls-tabs-navigation",children:e.tabs.map(t=>{return(0,i.jsx)("button",{className:(o=t.id,"crocoblock-style-manager__controls-tabs-button "+(e.activeTab===o?"is-active":"")),onClick:()=>e.onTabChange(t.id),children:t.title},t.id);var o})}),v=e=>{const[t,r]=(0,o.useState)(e.control.children[0].id);return(0,i.jsxs)("div",{className:"crocoblock-style-manager__controls-tabs",children:[(0,i.jsx)(y,{tabs:e.control.children,activeTab:t,onTabChange:r}),(0,i.jsx)("div",{className:"crocoblock-style-manager__controls-tabs-content",children:(()=>{const o=e.control.children.find(e=>e.id===t);return o&&o.children?o.children.map(t=>(0,i.jsx)(V,{control:t,props:e},t.id)):null})()})]})},w=window.wp.data,j={__desktop:{minWidth:992},__tablet:{maxWidth:991},__mobile:{maxWidth:478}},k=()=>j,C=(e,t)=>{const o=j[t];if(!o)return e;let r="";return o.minWidth&&(r+=`(min-width: ${o.minWidth}px)`),o.maxWidth&&(r&&(r+=" and "),r+=`(max-width: ${o.maxWidth}px)`),r?`@media ${r} { ${e} }`:e};function S(e,t){if(!e||!t)return!0;for(const[o,r]of Object.entries(e))if(Array.isArray(r)){if(!r.includes(t[o]))return!1}else if(t[o]!==r)return!1;return!0}function N(e){const t=e?.attributes||{},o=window.crocoStyleEditorData.support_name,r=t?.[o]||{};return{...t,...r}}const V=({control:e,props:t})=>{if(e.condition&&!S(e.condition,N(t)))return null;const{attributes:o,setAttributes:r}=t,l=window.crocoStyleEditorData.support_name,s=(0,w.useSelect)(e=>{const t=e("core/edit-post");let o="Desktop";return t&&"function"==typeof t.__experimentalGetPreviewDeviceType&&(o=t.__experimentalGetPreviewDeviceType()),`__${o.toLowerCase()}`},[]),h=Object.keys(j);o[l]?.[e.id]||(o[l][e.id]=e.defaultValue);const p=(e,t)=>{let o=null;for(const[r,l]of Object.entries(e)){if(l===t)return r;if("object"==typeof l&&(o=p(l,t),o))break}return o},y=t=>{if(e.return_value){let o=p(e.return_value,t);o&&("true"===(t=o)?t=!0:"false"===t&&(t=!1))}return t},k=t=>{e.return_value&&("boolean"==typeof t?t=!0===t?e.return_value.true||null:!1===t&&e.return_value.false||null:"string"!=typeof t&&"number"!=typeof t||(t=e.return_value?.[t]||null)),V(e.id,t)},C=e=>{if("__desktop"===s)return o[l][e];if(o[l][s]?.[e])return o[l][s][e];{const t=h.indexOf(s)-1,r=h[t];return t&&r&&o[l][r]?.[e]?o[l][r][e]:o[l][e]}},V=(e,t)=>{let a={};a="__desktop"===s?{...o[l],[e]:t}:{...o[l],[s]:{...o[l][s],[e]:t}},r({[l]:a})};return(0,i.jsxs)("div",{className:`crocoblock-style-manager__control is-control--${e.type}`,children:[(()=>{const t=C(e.id);if(e.default&&e.default===t)return null;if(a(t))return null;let r=!1,c="Is inherited from the previous breakpoints";return("__desktop"!==s||a(o[l][e.id]))&&a(o[l]?.[s]?.[e.id])||(r=!0,c="Explicitly set for the current device"),(0,i.jsx)(n.Tooltip,{text:c,placement:"top",delay:300,children:(0,i.jsx)("div",{className:"crocoblock-style-manager__usage-marker is-"+(r?"used":"inherited")})})})(),(()=>{const t={control:e,value:y(C(e.id)),handleChange:k};switch(e.type){case"text":return(0,i.jsx)(f,{...t});case"input":return(0,i.jsx)(c,{...t});case"color-picker":return(0,i.jsx)(m,{...t});case"toggle":return(0,i.jsx)(x,{...t});case"range":return(0,i.jsx)(_,{...t});case"choose":return(0,i.jsx)(u,{...t});case"dimensions":return(0,i.jsx)(b,{...t});case"border":return(0,i.jsx)(d,{...t});case"typography":return(0,i.jsx)(g,{...t});case"select":return(0,i.jsx)(i.Fragment,{});case"tabs":return(0,i.jsx)(v,{control:e,attributes:o,setAttributes:r});default:return null}})()]})},B=({section:e,props:t})=>{return e.condition&&!S(e.condition,N(t))?null:(0,i.jsx)(n.PanelBody,{title:e.title,initialOpen:e.initialOpen,className:"crocoblock-style-manager__control-section",children:(o=e,!!o.children&&!!(Array.isArray(o.children)&&o.children.length>0)&&e.children.map(e=>(0,i.jsx)(V,{control:e,props:t},e.id)))});var o},D=e=>{const t=(o=e.name,window.crocoBlockStyleEditor.getBlockControls(o)||{});var o;return(0,i.jsx)(r.InspectorControls,{group:"styles",children:t.map(t=>(0,i.jsx)(B,{section:t,props:e},t.id))})};class T{static getType(){return"base-field"}constructor(e,t){this.uniqueClassName=e,this.rawValue=t}getSelectorMacros(){return{wrapper:"body .is-root-container ."+this.uniqueClassName,id:this.uniqueClassName}}parseSelector(e,t){const o=this.getSelectorMacros();return` ${e=this.replaceData(e,o)} { ${t=this.getParsedProps(t)} }`}getParsedProps(e){const t=this.getParsedValue();return this.replaceData(e,t)}replaceData(e,t){return e.replace(/{{\s*([\w-]+)\s*}}/g,(e,o)=>(o=o.toLowerCase(),void 0!==t[o]?t[o]:e))}getParsedValue(){return{value:this.rawValue}}cssVarValueFormat(){return"{{VALUE}}"}isValidValueForVar(e,t){return!("inherit"===e||"initial"===e||"unset"===e||null==e||"object"==typeof e&&!Object.keys(e).length||"string"==typeof e&&!e.trim()||"number"==typeof e&&isNaN(e)||"function"==typeof e)}parseVariable(e){const t=e.prefix||"",o=e.name||!1;let r=e.full_name||t+"-"+o;if(!r)return"";e.suffix&&(r+=e.suffix);let l=this.getParsedValue(),s={};if(l.value)s[r]=l.value;else for(const e in l)l.hasOwnProperty(e)&&this.isValidValueForVar(l[e],e)&&(s[r+"__"+e]=l[e]);return s}}class z extends T{static getType(){return"color-picker"}}class E extends T{static getType(){return"typography"}getParsedValue(){return{family:this.rawValue.family||"inherit",weight:this.rawValue.weight||"inherit",transform:this.rawValue.transform||"inherit",style:this.rawValue.style||"inherit",decoration:this.rawValue.decoration||"inherit",lineheight:this.rawValue.lineheight||this.rawValue.lineHeight||"inherit",lh_unit:"",letterspacing:this.rawValue.letterSpacing||"inherit",ls_unit:"",size:this.rawValue.size||"inherit",s_unit:""}}}class M extends T{static getType(){return"border"}getParsedValue(){return this.rawValue?{border:this.parseBorderValue(this.rawValue.border),radius:this.rawValue.radius}:{border:{},radius:{}}}parseBorderValue(e){return e?e.color||e.width||e.style?{global:{color:e.color||"inherit",width:e.width||"inherit",style:e.style||"inherit"}}:e:{}}getParsedProps(e){const t=this.getParsedValue();let o="";if(t.border)for(const[e,r]of Object.entries(t.border))o+="global"===e?this.getBorderCSS(r):this.getBorderCSS(r,e);if(t.radius)if(l(t.radius)){const e={"border-top-left-radius":"topLeft","border-top-right-radius":"topRight","border-bottom-right-radius":"bottomRight","border-bottom-left-radius":"bottomLeft"};for(const[r,l]of Object.entries(e))t.radius[l]&&(o+=`${r}: ${t.radius[l]};`)}else o+=`border-radius: ${t.radius};`;return o}parseVariable(e){const t=void 0!==e.prefix?e.prefix:"",o=void 0!==e.name&&e.name;let r=e.full_name?e.full_name:t+"-"+o;if(!r)return{};e.suffix&&(r+=e.suffix);const l=this.getParsedValue(),s={};if(l.radius){let e="";"string"==typeof l.radius?e=l.radius:(["topLeft","topRight","bottomRight","bottomLeft"].forEach(t=>{e+=l.radius[t]?l.radius[t]+" ":"0 "}),e=e.trim()),s[r+"__radius"]=e}if(l.border&&"object"==typeof l.border){const e=l.border.global||{};["top","right","bottom","left"].forEach(t=>{const o=l.border[t]&&"object"==typeof l.border[t]?l.border[t]:{},a=o.color||e.color||"transparent",n=o.width||e.width||"0",i=o.style||e.style||"solid";s[r+"__"+t]=n+" "+i+" "+a})}return s}getBorderCSS(e,t){let o="";return t=t?"-"+t:"",e&&e.color&&(o+=`border${t}-color: ${e.color};`),e&&e.width&&(o+=`border${t}-width: ${e.width};`),e&&e.style&&(o+=`border${t}-style: ${e.style};`),o}}class H extends T{static getType(){return"dimensions"}parseVariable(e){const t=e.prefix||"",o=e.name||!1;let r=e.full_name||t+"-"+o;if(!r)return"";e.suffix&&(r+=e.suffix);let s=this.getParsedValue(),a="",n={};if(!l(s))return n;let i=["top","right","bottom","left"],c=!0;for(const e of i)s[e]&&(c=!1),a+=`${s[e]||0} `;return c||(n[r]=a.trim()),n}getParsedValue(){if(!this.rawValue)return{top:"",right:"",bottom:"",left:""};let e={};e=l(this.rawValue)?{top:this.rawValue.top||"",right:this.rawValue.right||"",bottom:this.rawValue.bottom||"",left:this.rawValue.left||""}:{top:this.rawValue,right:this.rawValue,bottom:this.rawValue,left:this.rawValue};for(const t in e)e[t]||(e[t]="0"),e[t].match(/[^\d]+$/)||(e[t]+="px");return e}}class P extends T{static getType(){return"range"}getParsedValue(){return{value:this.rawValue||0,unit:""}}}class O extends T{static getType(){return"choose"}getSelectorMacros(){return{wrapper:"body .is-root-container ."+this.uniqueClassName}}replaceData(e,t){return e.replace(/{{\s*([\w-]+)\s*}}/g,(e,o)=>(o=o.toLowerCase(),void 0!==t[o]?t[o]:e))}getParsedValue(){return{value:this.rawValue}}}class R extends T{static getType(){return"toggle"}getParsedValue(){return{value:this.rawValue||null}}}class L{constructor(e,t){this.blockName=e,this.attributes=t,this.uniqueClassName=t._uniqueClassName||!1,this.css="",this.cssVariables={},this.responsiveCSS={},this.controlHandlers={[z.getType()]:z,[E.getType()]:E,[M.getType()]:M,[H.getType()]:H,[P.getType()]:P,[O.getType()]:O,[R.getType()]:R}}getControlHandler(e){const t=e.type||!1;return t&&this.controlHandlers[t]||!1}getCSS(){this.css="";const{blockName:e}=this;if(!window.crocoBlockStyleEditor.blocks[e])return this.css;for(const t of window.crocoBlockStyleEditor.blocks[e])this.generateControlStyles(t);for(const e in this.responsiveCSS){if(!this.responsiveCSS[e])continue;const t=C(this.responsiveCSS[e],e);t&&(this.css+=t)}return{styles:this.css,variables:this.cssVariables}}generateResponsiveStyles(e,t){const o=e.id||!1,r=e.css_selector||!1;if(o&&r)for(const e in k()){if(!this.attributes?.[e]?.[o])continue;const l=new t(this.uniqueClassName,this.attributes[e][o]);for(const t in r){const o=l.parseSelector(t,r[t]);this.responsiveCSS[e]||(this.responsiveCSS[e]=""),this.responsiveCSS[e]+=o}}}generateResponsiveVariables(e,t,o){for(const r in k()){if(t.suffix="",!this.attributes?.[r]?.[e])continue;t.suffix=r;const l=new o(this.uniqueClassName,this.attributes[r][e]);this.cssVariables={...this.cssVariables,...l.parseVariable(t)}}}generateControlStyles(e){const t=this.getControlHandler(e),o=e.id||!1,{attributes:r}=this;if(t&&o){if(r[o]){const r=new t(this.uniqueClassName,this.attributes[o]);if(e.css_selector)for(const t in e.css_selector)this.css+=r.parseSelector(t,e.css_selector[t]);e.css_var&&(this.cssVariables={...this.cssVariables,...r.parseVariable(e.css_var)})}e.css_selector&&this.generateResponsiveStyles(e,t),e.css_var&&this.generateResponsiveVariables(o,e.css_var,t)}if(e.children)for(const t of e.children)this.generateControlStyles(t)}}const $=(0,t.createHigherOrderComponent)(e=>t=>{const{name:r,className:l="",clientId:s,setAttributes:a,attributes:n}=t,c=(0,w.useSelect)(e=>e("core/blocks").getBlockType(r),[r]);if(c?.supports?.crocoblock_styles){const r=t?.attributes?.[window.crocoStyleEditorData.support_name]?._uniqueClassName;return(0,o.useEffect)(()=>{if(window.crocoBlockStyleEditor.classIsUsed(r,s)){const e=F();a({[window.crocoStyleEditorData.support_name]:{...n[window.crocoStyleEditorData.support_name],_uniqueClassName:e}})}},[]),(0,i.jsx)(e,{...t,className:`${l} ${r}`.trim()})}return(0,i.jsx)(e,{...t})},"withBlockUniqueClass"),F=()=>{let e="";for(let t=0;t<8;t++)e+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(0!==t?Math.floor(36*Math.random()):Math.floor(26*Math.random()));return window.crocoStyleEditorData.class_prefix+e},I=(0,t.createHigherOrderComponent)(e=>t=>{const{attributes:r,clientId:l,setAttributes:a}=t,n=window.crocoStyleEditorData.support_name;if(!r||!r[n])return(0,i.jsx)(e,{...t});(0,o.useEffect)(()=>{r[n]._uniqueClassName||a({[n]:{...r[n],_uniqueClassName:F()}})},[l]);const c=new L(t.name,r[n]),{styles:u,variables:d}=c.getCSS();return(0,i.jsxs)(i.Fragment,{children:[!s(u)&&(0,i.jsx)("style",{children:u}),!s(d)&&(0,i.jsx)("div",{style:d,className:"wp-block",children:(0,i.jsx)(e,{...t})}),s(d)&&(0,i.jsx)(e,{...t}),(0,i.jsx)(D,{...t})]})},"withStylesControls");window.crocoBlockStyleEditor=new class{init(){this.blocks=window?.crocoStyleEditorData?.blocks_supports||{},this.supportName=window?.crocoStyleEditorData?.support_name,this.defaults=window?.crocoStyleEditorData?.defaults||{},this.usedClasses={},(0,e.addFilter)("blocks.registerBlockType","crocoblock-style-manager/enable-block-support",this.registerBlock.bind(this)),(0,e.addFilter)("editor.BlockEdit","crocoblock-style-manager/enable-block-support",I),(0,e.addFilter)("editor.BlockListBlock","crocoblock-style-manager/with-crocoblock-editor-class",$,0)}classIsUsed(e,t){return!(!e||!t||(this.usedClasses[e]?this.usedClasses[e]===t:(this.usedClasses[e]=t,1)))}getBlockControls(e){return this.blocks[e]||!1}registerBlock(e,t){if(!this.getBlockControls(t))return e;const o=e.supports||{};o[this.supportName]=!0;const r=e.attributes||{};if(!r[this.supportName]){let e={_uniqueClassName:""};this.defaults[t]&&(e={...e,...this.defaults[t]}),r[this.supportName]={type:"object",default:e,style:!0}}return{...e,supports:o,attributes:r}}},window.crocoBlockStyleEditor.init()})();