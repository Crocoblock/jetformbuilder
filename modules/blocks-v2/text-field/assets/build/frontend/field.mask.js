(()=>{"use strict";const{applyFilters:t}=JetPlugins.hooks,{ReactiveHook:s,InputData:i}=JetFormBuilderAbstract;function e(){i.call(this),this.maskOptions={},this.clearOnSubmit=!1,this.isSupported=function(t){return t.classList.contains("jet-form-builder__masked-field")&&jQuery.fn.inputmask},this.addListeners=function(){const[t]=this.nodes;t.addEventListener("blur",(()=>{const{value:s}=t;this.value.current=t.inputmask.unmaskedvalue(),this.reporting.validateOnBlur(),this.silenceSet(s)})),this.enterKey=new s,t.addEventListener("keydown",this.handleEnterKey.bind(this))},this.maskValidation=function(){const[t]=this.nodes,{value:s}=t;this.value.current=t.inputmask.unmaskedvalue(),this.debouncedReport(),this.silenceSet(s)},this.setNode=function(s){var e;i.prototype.setNode.call(this,s),this.clearOnSubmit=null!==(e=s.dataset.clearMaskOnSubmit)&&void 0!==e&&e;const n=this.clearOnSubmit?{autoUnmask:!0}:{};n.oncomplete=this.maskValidation.bind(this),n.onincomplete=this.maskValidation.bind(this);const o=t("jet.fb.inputmask.options",n,this);jQuery(s).inputmask(o),this.beforeSubmit(this.removeMask.bind(this)),this.getSubmit().onEndSubmit(this.revertMask.bind(this))},this.removeMask=function(t){const s=jQuery(this.nodes[0]);this.maskOptions=s[0].inputmask.opts,this.value.current&&!this.clearOnSubmit||(s.inputmask("remove"),this.value.notify()),t()},this.revertMask=function(){const[t]=this.nodes,s=this.maskOptions;this.maskOptions={},t.inputmask||jQuery(t).inputmask(s)},this.onClear=function(){this.silenceSet("")}}e.prototype=Object.create(i.prototype);const n=e,{addFilter:o}=JetPlugins.hooks;o("jet.fb.inputs","jet-form-builder/text-field-masked",(function(t){return[n,...t]}))})();