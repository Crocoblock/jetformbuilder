(()=>{"use strict";function t(t){var e;return null==t||null===(e=t.classList)||void 0===e?void 0:e.contains("jet-form-builder-choice")}function e(t){return t.closest(".jet-form-builder-choice--item")}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return u=t.done,t},e:function(t){s=!0,a=t},f:function(){try{u||null==r.return||r.return()}finally{if(s)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var a=JetFormBuilderAbstract,u=a.InputData,s=a.ReactiveSet,l=a.ReactiveHook,c=JetFormBuilderFunctions.getParsedName;function f(){u.call(this),this.isSupported=t,this.setNode=function(t){this.nodes=Array.from(t.querySelectorAll(".jet-form-builder-choice--item input")),this.rawName=this.nodes[0].name,this.name=c(this.rawName),this.inputType="choice"},this.setValue=function(){this.value.current=this.isArray()?this.getMultipleValue():this.getSingleValue()},this.addListeners=function(){var t,e=this,r=n(this.nodes);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.addEventListener("change",(function(){return e.setValue()})),this.addListenerForChoice(i)}}catch(t){r.e(t)}finally{r.f()}this.isArray()&&this.sanitize((function(t){return Array.isArray(t)?t:[t]}))},this.getMultipleValue=function(){return Array.from(this.nodes).filter((function(t){return t.checked})).map((function(t){return t.value}))},this.getSingleValue=function(){var t,e=n(this.nodes);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(r.checked)return r.value}}catch(t){e.e(t)}finally{e.f()}return""},this.addListenerForChoice=function(t){var r=this,n=e(t);n.addEventListener("click",(function(e){return r.toggleChoice(t,e)})),this.enterKey=new l,this.isNativeControl(t)?t.addEventListener("keydown",this.handleEnterKey.bind(this)):n.addEventListener("keydown",(function(e){r.handleEnterKey(e),r.handleSpaceKey(e,t),r.handleNextKey(e,t),r.handlePrevKey(e,t)}))},this.toggleChoice=function(t,e){var r;"LABEL"!==(null==e||null===(r=e.target)||void 0===r?void 0:r.nodeName)&&(this.isArray()?this.value.toggle(t.value):this.value.current!==t.value?this.value.current=t.value:this.onClear())},this.hasAutoScroll=function(){return this.isNativeControl(this.nodes[0])},this.focusRaw=function(){var t=r(this.nodes,1)[0];this.isNativeControl(t)?u.prototype.focusRaw.call(this):e(t).focus({preventScroll:!0})}}f.prototype=Object.create(u.prototype),f.prototype.getReactive=function(){return new s},f.prototype.isNativeControl=function(t){return t.classList.contains("jet-form-builder-choice--item-control-input")},f.prototype.handleNextKey=function(t,e){if(["ArrowRight","ArrowDown"].includes(t.key)){t.preventDefault();var r=this.nextNode(e);this.switchChoice(r)}},f.prototype.handlePrevKey=function(t,e){if(["ArrowUp","ArrowLeft"].includes(t.key)){t.preventDefault();var r=this.prevNode(e);this.switchChoice(r)}},f.prototype.handleSpaceKey=function(t,e){["Spacebar"," "].includes(t.key)&&(t.preventDefault(),this.toggleChoice(e))},f.prototype.switchChoice=function(t){var r=e(t);this.toggleChoice(t),r.focus({preventScroll:!0})},f.prototype.nextNode=function(t){var e,i=n(this.nodes.entries());try{for(i.s();!(e=i.n()).done;){var o=r(e.value,2),a=o[0];if(o[1]===t)return this.nodes.hasOwnProperty(+a+1)?this.nodes[+a+1]:this.nodes[0]}}catch(t){i.e(t)}finally{i.f()}},f.prototype.prevNode=function(t){var e,i=n(this.nodes.entries());try{for(i.s();!(e=i.n()).done;){var o=r(e.value,2),a=o[0];if(o[1]===t)return this.nodes.at(a-1)}}catch(t){i.e(t)}finally{i.f()}};const h=f;function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var y=JetFormBuilderAbstract.BaseSignal,v=JetFormBuilderFunctions.isEmpty;function p(){y.call(this),this.isRadio=null,this.indexedFirst=!1,this.isSupported=function(t,r){return!!e(t)},this.runSignal=function(){this.input.calcValue=0,this.indexedFirst=!1;var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(this.input.nodes);try{for(r.s();!(t=r.n()).done;){var n,i,o,a=t.value;a.checked=this.isRadio?this.input.value.current===a.value:null===(n=this.input.value.current)||void 0===n?void 0:n.includes(a.value);var u=e(a);this.toggleTabIndex(a,u),u.classList.toggle("is-checked",a.checked),u.ariaChecked=a.checked,this.toggleImageControl(u,a.checked),a.checked&&(this.input.calcValue+=parseFloat(null!==(i=null===(o=a.dataset)||void 0===o?void 0:o.calculate)&&void 0!==i?i:a.value))}}catch(t){r.e(t)}finally{r.f()}},this.setInput=function(t){y.prototype.setInput.call(this,t),this.isRadio=!this.input.isArray()}}p.prototype=Object.create(y.prototype),p.prototype.toggleImageControl=function(t,e){var r=t.querySelector(".jet-form-builder-choice--item-control-img");if(r){var n=e?r.dataset.srcChecked:r.dataset.srcDefault;r.src!==n&&(r.src=n)}},p.prototype.toggleTabIndex=function(t,e){if(this.isRadio&&!this.input.isNativeControl(t)){if(v(this.input.value.current))return this.setRawTabIndex(e,this.indexedFirst?-1:0),void(this.indexedFirst=!0);this.setRawTabIndex(e,t.checked?0:-1)}},p.prototype.setRawTabIndex=function(t,e){e!==t.tabIndex&&(t.tabIndex=e)};const m=p;function b(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var A=JetPlugins.hooks.addFilter;A("jet.fb.inputs","jet-form-builder/choices-field",(function(t){return[h].concat(b(t))})),A("jet.fb.signals","jet-form-builder/choices-field",(function(t){return[m].concat(b(t))}))})();