(()=>{"use strict";function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}const r=function(r,n){if(null===n||null==n||!n.length)return r;var e,o=function(r,n){var e="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=function(r,n){if(r){if("string"==typeof r)return t(r,n);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?t(r,n):void 0}}(r))||n&&r&&"number"==typeof r.length){e&&(r=e);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,c=!1;return{s:function(){e=e.call(r)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,u=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw u}}}}(n);try{for(o.s();!(e=o.n()).done;)r=e.value.applyWithProps(r)}catch(t){o.e(t)}finally{o.f()}return r};function n(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function o(){this.props=[]}o.prototype.getSlug=function(){throw new Error("getSlug is empty")},o.prototype.setProps=function(t){var r;(r=this.props).push.apply(r,n(t))},o.prototype.applyWithProps=function(t){return this.apply.apply(this,[t].concat(n(this.props)))},o.prototype.apply=function(t){return t};const i=o;function u(){i.call(this),this.getSlug=function(){return"length"},this.apply=function(t){return t.length}}u.prototype=Object.create(i.prototype);const a=u;function c(){i.call(this),this.getSlug=function(){return"ifEmpty"},this.apply=function(t,r){return t||r}}c.prototype=Object.create(i.prototype);const l=c;function f(t,r){return(t=""+t).length>=r?t:new Array(r-t.length).fill(0)+t}function s(t){return[t.getFullYear(),f(t.getMonth()+1,2),f(t.getDate(),2)].join("-")}function p(t){return[f(t.getHours(),2),f(t.getMinutes(),2)].join(":")}function y(t){return s(t)+"T"+p(t)}function h(){i.call(this),this.getSlug=function(){return"toDate"},this.apply=function(t){return s(new Date(t))}}h.prototype=Object.create(i.prototype);const d=h;function m(){i.call(this),this.getSlug=function(){return"toTime"},this.apply=function(t){return p(new Date(t))}}m.prototype=Object.create(i.prototype);const g=m;function b(){i.call(this),this.getSlug=function(){return"toDateTime"},this.apply=function(t){return y(new Date(t))}}b.prototype=Object.create(i.prototype);const v=b;function w(){i.call(this),this.getSlug=function(){return"addDay"},this.apply=function(t,r){r=r?+r.trim():1;var n=new Date(t);return n.setDate(n.getDate()+r),n.getTime()}}w.prototype=Object.create(i.prototype);const S=w;function _(t,r){if(t){if("string"==typeof t)return I(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(t,r):void 0}}function I(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var j=wp.hooks.applyFilters,A=function(){return j("jet.fb.restrictions.filters",[a,l,d,g,v,S])},O=[],D=[];function M(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";O.length||(O=A().map((function(t){return new t})));var n=O.find((function(r){return t===r.getSlug()}));n&&(r=r.split(",").map((function(t){return t.trim()})),n.setProps(r),D.push(n))}const F=function(t){if(null===t||null==t||!t.length)return null;var r,n=function(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_(t))){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}(t);try{for(n.s();!(r=n.n()).done;){var e=r.value,o=e.match(/^(\w+)\(([^()]+)\)/);null!==o?M(o[1],o[2]):M(e)}}catch(t){n.e(t)}finally{n.f()}var i,u=function(t){if(Array.isArray(t))return I(t)}(i=D)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||_(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return D=[],u};function T(){}T.prototype={getId:function(){throw new Error("You need to rewrite this method")},getResult:function(){throw new Error("You need to rewrite this method")}};const C=T;function E(){C.call(this),this.getId=function(){return"CurrentDate"},this.getResult=function(){return(new Date).getTime()}}E.prototype=Object.create(C.prototype);const P=E;var R={Milli_In_Sec:1e3,Sec_In_Min:60,Min_In_Hour:60,Hour_In_Day:24,Day_In_Month:30,Year_In_Day:365};R.Min_In_Sec=R.Sec_In_Min*R.Milli_In_Sec,R.Hour_In_Sec=R.Min_In_Hour*R.Min_In_Sec,R.Day_In_Sec=R.Hour_In_Day*R.Hour_In_Sec,R.Month_In_Sec=R.Day_In_Month*R.Day_In_Sec,R.Year_In_Sec=R.Year_In_Day*R.Day_In_Sec;const H=R;function Y(){C.call(this),this.getId=function(){return"Min_In_Sec"},this.getResult=function(){return H.Min_In_Sec}}Y.prototype=Object.create(C.prototype);const B=Y;function k(){C.call(this),this.getId=function(){return"Month_In_Sec"},this.getResult=function(){return H.Month_In_Sec}}k.prototype=Object.create(C.prototype);const J=k;function x(){C.call(this),this.getId=function(){return"Hour_In_Sec"},this.getResult=function(){return H.Hour_In_Sec}}x.prototype=Object.create(C.prototype);const U=x;function $(){C.call(this),this.getId=function(){return"Day_In_Sec"},this.getResult=function(){return H.Day_In_Sec}}$.prototype=Object.create(C.prototype);const W=$;function q(){C.call(this),this.getId=function(){return"Year_In_Sec"},this.getResult=function(){return H.Year_In_Sec}}q.prototype=Object.create(C.prototype);const z=q;function G(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var K=wp.hooks.applyFilters,L=[];function N(t){L.length||(L=K("jet.fb.static.functions",[P,B,J,U,W,z]));var r,n=function(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return G(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==n.return||n.return()}finally{if(a)throw i}}}}(L);try{for(n.s();!(r=n.n()).done;){var e=new(0,r.value);if(e.getId()===t)return e}}catch(t){n.e(t)}finally{n.f()}return!1}function Q(t,r){(null==r||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}var V=wp.hooks,X=V.applyFilters;function Z(t,r){this.formula=t,this.parts=[],this.related=[],this.observe(t,r)}(0,V.addFilter)("jet.fb.custom.formula.macro","jet-form-builder",(function(t,n,e,o){if(!n.includes("CT::"))return t;var i=N(n=n.replace("CT::",""));return!1===i?t:r(i.getResult(),e)})),Z.prototype={formula:null,parts:[],related:[],regexp:/%(.*?)%/g,setResult:function(){throw new Error("CalculatedFormula.setResult is not set!")},relatedCallback:function(t,n){return r(t.value.current,n)},observe:function(t,r){var n=this;if(Array.isArray(t))t.forEach((function(t){n.observe(t,r)}));else{var e=t.split(this.regexp);1!==e.length&&(this.parts=e.map((function(t){var e,o=function(t){if(Array.isArray(t))return t}(e=t.split("|"))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,r){if(t){if("string"==typeof t)return Q(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=o[0],u=o.slice(1),a=r.getInput(i);if(!a&&!i.includes("::"))return t;var c=F(u);return i.includes("::")?X("jet.fb.custom.formula.macro",t,i,c,r):(n.related.includes(a.name)||(n.related.push(a.name),a.watch((function(){return n.setResult()}))),function(){return n.relatedCallback(a,c)})})))}},calculate:function(){if(!this.parts.length)return this.formula;var t=this.parts.map((function(t){if("string"==typeof t)return t;var r=t();return null===r?0:r})).join("");return new Function("return "+t)()}};const tt=Z;var rt,nt,et;function ot(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),n.push.apply(n,e)}return n}function it(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ot(Object(n),!0).forEach((function(r){ut(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))}))}return t}function ut(t,r,n){return r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}window.JetFormBuilderAbstract=it(it({},null!==(rt=window.JetFormBuilderAbstract)&&void 0!==rt?rt:{}),{},{CalculatedFormula:tt,BaseInternalMacro:C}),window.JetFormBuilderFunctions=it(it({},null!==(nt=window.JetFormBuilderFunctions)&&void 0!==nt?nt:{}),{},{getFilters:F,applyFilters:r,toDate:s,toDateTime:y,toTime:p}),window.JetFormBuilderConst=it(it({},null!==(et=window.JetFormBuilderConst)&&void 0!==et?et:{}),H)})();