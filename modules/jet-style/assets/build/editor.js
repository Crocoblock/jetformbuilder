(()=>{"use strict";const{useBlockEditContext:t}=wp.blockEditor,{useSelect:e}=wp.data,o=function(){const{clientId:o,name:n}=t();return e((t=>{const{supports:e}=t("core/blocks").getBlockType(n);return e.hasOwnProperty("jetStyle")?e.jetStyle:{}}),[o])},{get:n}=window._;function s(){this.cssVar="",this.path=[]}s.prototype={isSupported:t=>!0,compileDeclarations(t,e,o){const s=n(t,this.path);s&&(e[this.cssVar]=s)},compileClassNames(t,e){if(!this.hasHoverPath()||!n(e,this.path))return;const o=this.path.slice(1);t.push("has-hover-"+o.join("-"))},hasHoverPath(){return this.path[0].includes(":hover")},setCssVar(t){return this.cssVar=t,this},setPath(t){return this.path=t,this}};const l=s,{get:r}=window._,{isEmpty:i}=JetFBActions,a=["top","right","bottom","left"];function c(){l.call(this),this.isSupported=function(t){return"border"===t.at(-1)},this.compileDeclarations=function(t,e,o){const n=r(t,this.path);if(i(n))return;const s=this.hasHoverPath();["style","width","color"].forEach((t=>{const l=this.getSideValue(n,"top",t);l&&(e[this.getTopVar(t)]=l);const r=this.getSideValue(n,"right",t);r&&(e[this.getRightVar(t)]=r);const i=this.getSideValue(n,"bottom",t);i&&(e[this.getBottomVar(t)]=i);const a=this.getSideValue(n,"left",t);a&&(e[this.getLeftVar(t)]=a),s&&[l,r,i,a].filter(Boolean).length&&o.push(`has-hover-border-${t}`)}))},this.compileClassNames=()=>{}}c.prototype=Object.create(l.prototype),c.prototype.getTopVar=function(t){return`${this.cssVar}-top-${t}`},c.prototype.getRightVar=function(t){return`${this.cssVar}-right-${t}`},c.prototype.getBottomVar=function(t){return`${this.cssVar}-bottom-${t}`},c.prototype.getLeftVar=function(t){return`${this.cssVar}-left-${t}`},c.prototype.isLinked=function(t){const[e]=Object.keys(t);return a.includes(e)},c.prototype.getSideValue=function(t,e,o){if(!a.includes(e))return"";let n="";var s,l;return n=this.isLinked(t)?null!==(s=t[e]?.[o])&&void 0!==s?s:"":null!==(l=t[o])&&void 0!==l?l:"",n.trim()};const u=c,{get:p}=window._,{isEmpty:h}=JetFBActions;function d(){l.call(this),this.isSupported=function(t){return"border"===t.at(1)&&"radius"===t.at(-1)},this.compileDeclarations=function(t,e,o){const n=p(t,this.path);if(h(n))return;const s=this.getTopLeft(n);s&&(e[`${this.cssVar}-top-left`]=s);const l=this.getTopRight(n);l&&(e[`${this.cssVar}-top-right`]=l);const r=this.getBottomRight(n);r&&(e[`${this.cssVar}-bottom-right`]=r);const i=this.getBottomLeft(n);i&&(e[`${this.cssVar}-bottom-left`]=i)}}d.prototype=Object.create(l.prototype),d.prototype.isLinked=function(t){const[e]=Object.keys(t);return["topLeft","topRight","bottomLeft","bottomRight"].includes(e)},d.prototype.getTopLeft=function(t){return this.isLinked(t)?t?.topLeft:t},d.prototype.getTopRight=function(t){return this.isLinked(t)?t?.topRight:t},d.prototype.getBottomLeft=function(t){return this.isLinked(t)?t?.bottomLeft:t},d.prototype.getBottomRight=function(t){return this.isLinked(t)?t?.bottomRight:t};const m=d,{get:f}=window._,{isEmpty:b}=JetFBActions,g=["top","right","bottom","left"];function V(){l.call(this),this.isSupported=function(t){return["padding","margin"].includes(t.at(-1))},this.compileDeclarations=function(t,e){const o=f(t,this.path);if(!b(o))for(const t of g)e[`${this.cssVar}-${t}`]=this.getSideValue(t,o).trim()},this.compileClassNames=()=>{}}V.prototype=Object.create(l.prototype),V.prototype.getSideValue=function(t,e){var o;return"string"==typeof e?e:null!==(o=e[t])&&void 0!==o?o:""};const y=V,{get:w}=window._,{isEmpty:C}=JetFBActions;function S(){u.call(this),this.isSupported=function(t){return"border-v2"===t.at(-1)},this.compileDeclarations=function(t,e,o){const n=w(t,this.path);C(n)||["style","width","color"].forEach((t=>{const o=this.getSideValue(n,"top",t);o&&(e[this.getTopVar(t)]=o);const s=this.getSideValue(n,"right",t);s&&(e[this.getRightVar(t)]=s);const l=this.getSideValue(n,"bottom",t);l&&(e[this.getBottomVar(t)]=l);const r=this.getSideValue(n,"left",t);r&&(e[this.getLeftVar(t)]=r)}))}}S.prototype=Object.create(u.prototype),S.prototype.getTopVar=function(t){return`${this.cssVar}-${t}-top`},S.prototype.getRightVar=function(t){return`${this.cssVar}-${t}-right`},S.prototype.getBottomVar=function(t){return`${this.cssVar}-${t}-bottom`},S.prototype.getLeftVar=function(t){return`${this.cssVar}-${t}-left`};const B=S,E=[new y,new m,new B,new u,new l];function _(t){for(const e of E)if(e.isSupported(t))return e;throw new Error("Something went wrong")}const{useMemo:k}=wp.element,{useBlockAttributes:F}=JetFBHooks,{set:v}=JetFBActions,x=function(t,e){var o;const n=null!==(o=t?.style)&&void 0!==o?o:{},{get:s}=window._;return[s(n,e),t=>v(JSON.parse(JSON.stringify(n)),e,t)]},{useBlockAttributes:I}=JetFBHooks,A=window.React,{createContext:P}=wp.element,$=P({setCssVars:null}),{useBlockEditContext:j}=wp.blockEditor,{__:O}=wp.i18n;let{__experimentalToolsPanel:J,ToolsPanel:L}=wp.components;const{useCallback:T}=wp.element,{useInstanceId:D}=wp.compose;L=L||J;const{useBlockAttributes:R}=JetFBHooks,{createContext:N}=wp.element,H=N({panelId:null,resetAllFilter:null,onDeselect:null,hasValue:null,cssValue:null,updateCss:null,path:null}),{useContext:G,useMemo:M,useCallback:U}=wp.element,{useBlockAttributes:z}=JetFBHooks,W=function({cssVar:t,defaultValue:e,children:n}){const{panelId:s}=G($),l=(h=t,null!==(d=o()[h])&&void 0!==d?d:[]),[r,i]=z(),[a,c]=M((()=>x(r,l)),[r]),u=U((t=>{const e=c(t);i({...r,style:e})}),[r]),p=(t,o)=>{const[,n]=x(t,l);return{...t,style:n(null!=o?o:e)}};var h,d;return(0,A.createElement)(H.Provider,{value:{panelId:s,onDeselect:function(t){i(p(r,t))},hasValue:function(){const[t]=x(r,l);return t!==e},cssValue:a,updateCss:u,resetAllFilter:p,path:l}},n)};let{__experimentalToolsPanelItem:q,ToolsPanelItem:K}=wp.components;K=K||q;const{useContext:Q}=wp.element;function X(t){const{panelId:e,resetAllFilter:o,onDeselect:n,hasValue:s}=Q(H);return(0,A.createElement)(K,{panelId:e,resetAllFilter:o,onDeselect:n,hasValue:s,...t})}const Y=function({cssVar:t,defaultValue:e,...o}){return(0,A.createElement)(W,{cssVar:t,defaultValue:e},(0,A.createElement)(X,{...o}))};let{__experimentalColorGradientSettingsDropdown:Z,ColorGradientSettingsDropdown:tt,__experimentalUseMultipleOriginColorsAndGradients:et,useMultipleOriginColorsAndGradients:ot}=wp.blockEditor;const{useContext:nt}=wp.element,{__:st}=wp.i18n;function lt({label:t}){const{panelId:e,resetAllFilter:o,cssValue:n,updateCss:s}=nt(H),l=ot(),r=[{colorValue:n,onColorChange:s,label:null!=t?t:st("Color","jet-form-builder"),resetAllFilter:o}];return(0,A.createElement)(tt,{__experimentalIsRenderedInSidebar:!0,settings:r,panelId:e,...l,gradients:[],disableCustomGradients:!0})}tt=tt||Z,ot=ot||et;const{useContext:rt}=wp.element;let{__experimentalBorderBoxControl:it,BorderBoxControl:at,__experimentalToolsPanelItem:ct,ToolsPanelItem:ut}=wp.components;ut=ut||ct,at=at||it;let{__experimentalUseMultipleOriginColorsAndGradients:pt,useMultipleOriginColorsAndGradients:ht}=wp.blockEditor;function dt({enableAlpha:t=!1,enableStyle:e=!0,label:o="",labelForControl:n=""}){const{cssValue:s,updateCss:l,onDeselect:r,hasValue:i,...a}=rt(H),{colors:c}=ht();return(0,A.createElement)(ut,{label:o,onDeselect:function(){const t=s?.hasOwnProperty?.("radius")?{radius:s.radius}:{};r(t)},hasValue:function(){if("object"!=typeof s)return!1;const[t]=Object.keys(s);return["top","left","right","bottom","color","width","style"].includes(t)},...a},(0,A.createElement)(at,{label:n,colors:c,onChange:t=>{const e=s?.hasOwnProperty?.("radius")?{...t,radius:s.radius}:t;l(e)},enableAlpha:t,enableStyle:e,popoverOffset:40,popoverPlacement:"left-start",value:s,__experimentalIsRenderedInSidebar:!0}))}ht=ht||pt;const{useContext:mt}=wp.element;let{__experimentalBorderRadiusControl:ft,BorderRadiusControl:bt}=wp.blockEditor;function gt(){const{cssValue:t,updateCss:e}=mt(H);return(0,A.createElement)(bt,{values:t,onChange:e})}bt=bt||ft;const Vt=window.wp.element,yt=window.wp.components;function wt({label:t="",labelForControl:e,sides:o=g}){const{cssValue:n,updateCss:s,onDeselect:l,hasValue:r,...i}=(0,Vt.useContext)(H);return(0,A.createElement)(yt.__experimentalToolsPanelItem,{label:t,onDeselect:l,hasValue:function(){if("object"!=typeof n)return!1;const[t]=Object.keys(n);return g.includes(t)},...i},(0,A.createElement)(yt.__experimentalBoxControl,{label:null!=e?e:t,onChange:t=>{const e={};o.forEach((o=>{e[o]=Number.isNaN(Number(t[o]))?t[o]:t[o]+"px"})),s(e)},sides:o,value:n}))}const{getSupport:Ct}=JetFBActions,{useContext:St}=wp.element;let{__experimentalToolsPanelItem:Bt,ToolsPanelItem:Et}=wp.components;Et=Et||Bt;const{HeightControl:_t}=wp.blockEditor,{isEmpty:kt}=JetFBActions;function Ft({label:t="",labelForControl:e}){const{cssValue:o,updateCss:n,onDeselect:s,hasValue:l,...r}=St(H);return(0,A.createElement)(Et,{label:t,onDeselect:s,hasValue:()=>!kt(o),...r},(0,A.createElement)(_t,{label:null!=e?e:t,onChange:n,value:o}))}(0,window.wp.hooks.addFilter)("blocks.registerBlockType","jet-form-builder/jet-style-support",(function(t,e){return!Ct(t,"jetStyle")||t.attributes.hasOwnProperty("style")||(t.attributes={...t.attributes,style:{type:"object",default:{}}}),t})),window.JetFBComponents={...window.JetFBComponents,StylePanel:function t({label:e,children:o,...n}){const{clientId:s}=j(),l=D(t),[r,i]=R(),a=T((t=>{let e=JSON.parse(JSON.stringify(r));t.forEach((t=>{e=t(e)})),i(e)}),[s,r]);return(0,A.createElement)(L,{label:null!=e?e:O("Style panel","jet-form-builder"),resetAll:a,panelId:l+s,...n},(0,A.createElement)($.Provider,{value:{panelId:l+s}},o))},StylePanelItem:Y,StyleColorItem:function({cssVar:t,...e}){return(0,A.createElement)(W,{cssVar:t},(0,A.createElement)(lt,{...e}))},StyleColorItemsWrapper:function({children:t}){return(0,A.createElement)("div",{className:"color-block-support-panel__inner-wrapper"},t)},StyleBorderItem:function({cssVar:t,enableAlpha:e=!1,enableStyle:o=!0,label:n="Border",labelForControl:s=!1,defaultValue:l,...r}){return(0,A.createElement)(W,{cssVar:t,defaultValue:l},(0,A.createElement)(dt,{enableAlpha:e,enableStyle:o,label:n,labelForControl:s?n:"",...r}))},StyleBorderRadiusItem:function({cssVar:t,...e}){return(0,A.createElement)(Y,{cssVar:t,...e},(0,A.createElement)(gt,null))},StyleBox:function({cssVar:t,label:e="",labelForControl:o,sides:n=g,...s}){return(0,A.createElement)(W,{cssVar:t,defaultValue:{}},(0,A.createElement)(wt,{label:e,labelForControl:o,sides:n,...s}))},StyleSize:function({cssVar:t,label:e="",labelForControl:o,...n}){return(0,A.createElement)(W,{cssVar:t,defaultValue:""},(0,A.createElement)(Ft,{label:e,labelForControl:o,...n}))}},window.JetFBHooks={...window.JetFBHooks,useJetStyle:function({style:t,className:e,...n}={}){const s=o(),[l]=F(),r=k((()=>function(t,e){const o={},n=[];for(const[s,l]of Object.entries(e)){const e=_(l).setCssVar(s).setPath(l);e.compileDeclarations(t,o,n),e.compileClassNames(n,t)}return{style:o,className:n.join(" ")}}(l?.style,s)),[l?.style,s]);return{style:{...r.style,...null!=t?t:{}},className:[e,r.className].filter(Boolean).join(" "),...n}},useJetStyleSupports:o,useStyle:function(t){var e;const[n,s]=I(),l=null!==(e=o()[t])&&void 0!==e?e:[];if(!l.length)return["",()=>{}];const[r,i]=x(n,l);return[r,t=>s({style:i(t)})]}}})();