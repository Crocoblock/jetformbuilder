(()=>{"use strict";const e=window.React,t=window.wp.i18n,l=window.wp.components,n=window.jfb.components,{MacrosFields:r}=JetFBComponents,o=function({settings:o,onChangeSettingObj:a}){return(0,e.createElement)(n.RowControl,null,(({id:i})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.LabelWithActions,null,(0,e.createElement)(n.Label,{htmlFor:i},(0,t.__)("Reply to Email Address","jet-form-builder")),(0,e.createElement)(r,{onClick:e=>{var t;return a({reply_to_email:(null!==(t=o.reply_to_email)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(l.TextControl,{id:i,value:o.reply_to_email,onChange:e=>a({reply_to_email:e}),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:a}=JetFBComponents,i=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(n.RowControl,null,(({id:i})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.LabelWithActions,null,(0,e.createElement)(n.Label,{htmlFor:i},(0,t.__)("Subject","jet-form-builder")),(0,e.createElement)(a,{onClick:e=>{var t;return o({subject:(null!==(t=r.subject)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(l.TextControl,{id:i,value:r.subject,onChange:e=>o({subject:e}),help:(0,t.__)("Define the subject line of the email. This will appear as the email's title when it is received. You can use form field macros to insert the values of form fields as part of the subject. To add macros, use the wrench icon to the right of the current option name.","jet-form-builder"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:m}=JetFBComponents,c=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(n.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.LabelWithActions,null,(0,e.createElement)(n.Label,{htmlFor:a},(0,t.__)("From Name","jet-form-builder")),(0,e.createElement)(m,{onClick:e=>{var t;return o({from_name:(null!==(t=r.from_name)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(l.TextControl,{id:a,value:r.from_name,onChange:e=>o({from_name:e}),help:(0,t.__)("Specify the name that will appear as the sender of the email. You can use form field macros to insert the values of form fields as part of the name. To add macros, use the wrench icon to the right of the current option name.","jet-form-builder"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},{MacrosFields:s}=JetFBComponents,d=function({settings:r,onChangeSettingObj:o}){return(0,e.createElement)(n.RowControl,null,(({id:a})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.LabelWithActions,null,(0,e.createElement)(n.Label,{htmlFor:a},(0,t.__)("From Email Address","jet-form-builder")),(0,e.createElement)(s,{onClick:e=>{var t;return o({from_address:(null!==(t=r.from_address)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(l.TextControl,{id:a,value:r.from_address,onChange:e=>o({from_address:e}),help:(0,t.__)("Specify the email address that will appear as the sender of the email. You can use form field macros to insert the values of form fields as part of the address. To add macros, use the wrench icon to the right of the current option name.","jet-form-builder"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))))},u=window.jfb.actions,{MacrosFields:_}=JetFBComponents,f=function({settings:r,onChangeSettingObj:o}){const{hasError:a,setShowError:i}=(0,u.useActionValidatorProvider)({isSupported:e=>"content"===e?.property});return(0,e.createElement)(n.RowControl,null,(({id:m})=>(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.LabelWithActions,null,(0,e.createElement)(n.RequiredLabel,{htmlFor:m},(0,t.__)("Content","jet-form-builder")),(0,e.createElement)(_,{onClick:e=>{var t;return o({content:(null!==(t=r.content)&&void 0!==t?t:"")+e})},withCurrent:!0})),(0,e.createElement)(n.RowControlEnd,{hasError:a},(0,e.createElement)(l.TextareaControl,{id:m,value:r.content,onChange:e=>o({content:e}),help:(0,t.__)("Define the main body of the email. You can use form field macros to insert the values of form fields as part of the content. To add macros, use the wrench icon to the right of the current option name.","jet-form-builder"),onBlur:()=>i(!0),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})))))},p=window.jfb.blocksToActions,h=function({settings:l,onChangeSettingObj:r}){const o=(0,p.useFields)({withInner:!1});return(0,e.createElement)(n.RowControl,{createId:!1},(0,e.createElement)(n.Label,null,(0,t.__)("Attachments","jet-form-builder")),(0,e.createElement)(n.FormLabeledTokenField,{label:(0,t.__)("Add form field with attachment","jet-form-builder"),value:l.attachments,suggestions:o,onChange:e=>r({attachments:[...new Set(e)]}),__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}))},b=[{value:"",label:"--"},{value:"admin",label:(0,t.__)("Admin email","jet-form-builder")},{value:"form",label:(0,t.__)("Email from submitted form field","jet-form-builder")},{value:"custom",label:(0,t.__)("Custom email","jet-form-builder")}],g=[{value:"",label:"--"},{value:"text/plain",label:(0,t.__)("Plain text","jet-form-builder")},{value:"text/html",label:(0,t.__)("HTML","jet-form-builder")}],E={"text/plain":(0,t.__)("Sends the email as plain text without any formatting.","jet-form-builder"),"text/html":(0,t.__)("Sends the email with HTML formatting, allowing for rich text, images, and other multimedia elements","jet-form-builder")},C={admin:(0,t.__)("Sends the email to the admin email address configured in General Settings.","jet-form-builder"),custom:(0,t.__)("Sends the email to a custom address specified in the Email Address field below.","jet-form-builder"),form:(0,t.__)("Uses the email address provided by the user in the form.","jet-form-builder")},j={form:(0,t.__)("Uses the email address provided by the user in the form.","jet-form-builder"),custom:(0,t.__)("Manually set a custom reply-to email address.","jet-form-builder")},y=function({settings:l,onChangeSettingObj:r}){const o=(0,p.useFields)({withInner:!1,placeholder:"--"});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(u.ValidatedSelectControl,{value:l.mail_to,onChange:e=>r({mail_to:e}),isErrorSupported:e=>"mail_to"===e?.property,label:(0,t.__)("Mail To","jet-form-builder"),help:C[l.mail_to],options:b,required:!0}),"custom"===l.mail_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedTextControl,{label:(0,t.__)("Email Address","jet-form-builder"),help:(0,t.__)("To apply multiple mailing addresses, separate them with commas","jet-form-builder"),value:l.custom_email,onChange:e=>r({custom_email:e}),required:!0})),"form"===l.mail_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{label:(0,t.__)("From field","jet-form-builder"),help:(0,t.__)('To apply multiple mailing addresses, you can select a "Checkbox Field" or a "Select field" with enabled "Is multiple" option.',"jet-form-builder"),value:l.from_field,onChange:e=>r({from_field:e}),options:o,isErrorSupported:e=>"from_field"===e?.property,required:!0})))},w=function({settings:l,onChangeSettingObj:r}){const o=(0,p.useFields)({withInner:!1,placeholder:"--"});return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(u.ValidatedSelectControl,{value:l.cc_from,onChange:e=>r({cc_from:e}),label:(0,t.__)("CC Address from","jet-form-builder"),options:b,help:C[l.cc_from]}),"custom"===l.cc_from&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedTextControl,{label:(0,t.__)("CC Email Address","jet-form-builder"),help:(0,t.__)("To apply multiple mailing addresses, separate them with commas","jet-form-builder"),value:l.cc_email,onChange:e=>r({cc_email:e}),isErrorSupported:e=>"cc_email"===e?.property,required:!0})),"form"===l.cc_from&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{label:(0,t.__)("CC Address From field","jet-form-builder"),help:(0,t.__)('To apply multiple mailing addresses, you can select a "Checkbox Field" or a "Select field" with enabled "Is multiple" option.',"jet-form-builder"),value:l.cc_field,onChange:e=>r({cc_field:e}),options:o,isErrorSupported:e=>"cc_field"===e?.property,required:!0})),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{value:l.bcc_from,onChange:e=>r({bcc_from:e}),label:(0,t.__)("BCC Address from","jet-form-builder"),options:b,help:C[l.bcc_from]}),"custom"===l.bcc_from&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedTextControl,{label:(0,t.__)("BCC Email Address","jet-form-builder"),help:(0,t.__)("To apply multiple mailing addresses, separate them with commas","jet-form-builder"),value:l.bcc_email,onChange:e=>r({bcc_email:e}),isErrorSupported:e=>"bcc_email"===e?.property,required:!0})),"form"===l.bcc_from&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{label:(0,t.__)("BCC Address From field","jet-form-builder"),help:(0,t.__)('To apply multiple mailing addresses, you can select a "Checkbox Field" or a "Select field" with enabled "Is multiple" option.',"jet-form-builder"),value:l.bcc_field,onChange:e=>r({bcc_field:e}),options:o,isErrorSupported:e=>"bcc_field"===e?.property,required:!0})))},v={type:"send_email",label:(0,t.__)("Send Email","jet-form-builder"),edit:function(r){var a,m;const{settings:s,onChangeSettingObj:_}=r,C=(0,p.useFields)({withInner:!1,placeholder:"--"});return(0,e.createElement)(l.Flex,{direction:"column"},(0,e.createElement)(y,{...r}),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(l.ToggleControl,{className:n.ClearBaseControlStyle,label:(0,t.__)("Use CC/BCC","jet-form-builder"),checked:s.use_cc_bcc,onChange:e=>_({use_cc_bcc:e})}),s.use_cc_bcc&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(w,{...r})),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{label:(0,t.__)("Reply To","jet-form-builder"),value:s.reply_to,onChange:e=>_({reply_to:e}),options:b,help:null!==(a=j[s.reply_to])&&void 0!==a?a:""}),"custom"===s.reply_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(o,{...r})),"form"===s.reply_to&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{label:(0,t.__)("Reply To Email From Field","jet-form-builder"),value:s.reply_from_field,onChange:e=>_({reply_from_field:e}),options:C})),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(i,{settings:s,onChangeSettingObj:_}),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(c,{settings:s,onChangeSettingObj:_}),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(d,{settings:s,onChangeSettingObj:_}),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(u.ValidatedSelectControl,{label:(0,t.__)("Content type","jet-form-builder"),value:s.content_type,onChange:e=>_({content_type:e}),options:g,help:null!==(m=E[s.content_type])&&void 0!==m?m:""}),Boolean(!s.content_type||"text/html"===s.content_type)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n.WideLine,null),(0,e.createElement)(l.ToggleControl,{className:n.ClearBaseControlStyle,label:(0,t.__)("Disable Auto-Formatting","jet-form-builder"),checked:s.disable_format,onChange:e=>_({disable_format:e}),help:(0,t.__)("By default, each new line in the email content field is changed to a separate paragraph element. And each link turns into a clickable hyperlink. To prevent this, enable this option.","jet-form-builder")})),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(f,{settings:s,onChangeSettingObj:_}),(0,e.createElement)(n.WideLine,null),(0,e.createElement)(h,{settings:s,onChangeSettingObj:_}))},icon:(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},(0,e.createElement)("rect",{x:"0",fill:"none",width:"20",height:"20"}),(0,e.createElement)("g",null,(0,e.createElement)("path",{d:"M19 14.5v-9c0-.83-.67-1.5-1.5-1.5H3.49c-.83 0-1.5.67-1.5 1.5v9c0 .83.67 1.5 1.5 1.5H17.5c.83 0 1.5-.67 1.5-1.5zm-1.31-9.11c.33.33.15.67-.03.84L13.6 9.95l3.9 4.06c.12.14.2.36.06.51-.13.16-.43.15-.56.05l-4.37-3.73-2.14 1.95-2.13-1.95-4.37 3.73c-.13.1-.43.11-.56-.05-.14-.15-.06-.37.06-.51l3.9-4.06-4.06-3.72c-.18-.17-.36-.51-.03-.84s.67-.17.95.07l6.24 5.04 6.25-5.04c.28-.24.62-.4.95-.07z"}))),docHref:"https://jetformbuilder.com/features/send-email/",category:"communication",validators:[({settings:e})=>!e?.mail_to&&{type:"empty",property:"mail_to"},({settings:e})=>!e?.content&&{type:"empty",property:"content"},({settings:e})=>"custom"===e?.mail_to&&!e?.custom_email&&{type:"empty",property:"custom_email"},({settings:e})=>"form"===e?.mail_to&&!e?.from_field&&{type:"empty",property:"from_field"},({settings:e})=>!("custom"!==e?.cc_from||!e.use_cc_bcc)&&!e?.cc_email&&{property:"cc_email"},({settings:e})=>!("form"!==e?.cc_from||!e.use_cc_bcc)&&!e?.cc_field&&{property:"cc_field"},({settings:e})=>!("custom"!==e?.bcc_from||!e.use_cc_bcc)&&!e?.bcc_email&&{property:"bcc_email"},({settings:e})=>!("form"!==e?.bcc_from||!e.use_cc_bcc)&&!e?.bcc_field&&{property:"bcc_field"}]};(0,u.registerAction)(v)})();