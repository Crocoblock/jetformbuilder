(()=>{"use strict";function t(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}const r=function(r,e){if(null===e||null==e||!e.length)return r;var n,o=function(r,e){var n="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!n){if(Array.isArray(r)||(n=function(r,e){if(r){if("string"==typeof r)return t(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(r,e):void 0}}(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,a=!0,l=!1;return{s:function(){n=n.call(r)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,u=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw u}}}}(e);try{for(o.s();!(n=o.n()).done;)r=n.value.applyWithProps(r)}catch(t){o.e(t)}finally{o.f()}return r};function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(t){if("string"==typeof t)return n(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?n(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(){this.props=[]}o.prototype.getSlug=function(){throw new Error("getSlug is empty")},o.prototype.setProps=function(t){var r;(r=this.props).push.apply(r,e(t))},o.prototype.applyWithProps=function(t){return this.apply.apply(this,[t].concat(e(this.props)))},o.prototype.apply=function(t){return t};const i=o;function u(){i.call(this),this.getSlug=function(){return"length"},this.apply=function(t){var r;return null!==(r=null==t?void 0:t.length)&&void 0!==r?r:0}}u.prototype=Object.create(i.prototype);const a=u;function l(){i.call(this),this.getSlug=function(){return"ifEmpty"},this.apply=function(t,r){return t||r}}l.prototype=Object.create(i.prototype);const c=l;function s(t,r){return(t=""+t).length>=r?t:new Array(r-t.length).fill(0)+t}function f(t){return[t.getFullYear(),s(t.getMonth()+1,2),s(t.getDate(),2)].join("-")}function p(t){return[s(t.getHours(),2),s(t.getMinutes(),2)].join(":")}function y(t){return f(t)+"T"+p(t)}function h(t){if(!Number.isNaN(+t))return{time:+t,type:"number"};if((t=t.toString()).split("-").length>1){var r=new Date(t);return t.includes("T")||r.setHours(0,0,0),{time:r.getTime(),type:"date"}}var e=t.split(":"),n=[Date.prototype.setHours,Date.prototype.setMinutes,Date.prototype.setSeconds],o=new Date;for(var i in e)e.hasOwnProperty(i)&&n.hasOwnProperty(i)&&n[i].call(o,e[i]);return{time:o.getTime(),type:"time"}}function d(){i.call(this),this.getSlug=function(){return"toDate"},this.apply=function(t){return f(new Date(t))}}d.prototype=Object.create(i.prototype);const m=d;function b(){i.call(this),this.getSlug=function(){return"toTime"},this.apply=function(t){return p(new Date(t))}}b.prototype=Object.create(i.prototype);const v=b;function g(){i.call(this),this.getSlug=function(){return"toDateTime"},this.apply=function(t){return y(new Date(t))}}g.prototype=Object.create(i.prototype);const w=g;function _(){i.call(this),this.getSlug=function(){return"addDay"},this.apply=function(t,r){r=r?+r.trim():1;var e=new Date(t);return e.setDate(e.getDate()+r),e.getTime()}}_.prototype=Object.create(i.prototype);const S=_;function I(){i.call(this),this.getSlug=function(){return"T"},this.apply=function(t){return t?h(t).time:0}}I.prototype=Object.create(i.prototype);const j=I;function A(t,r){if(t){if("string"==typeof t)return O(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?O(t,r):void 0}}function O(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var D=wp.hooks.applyFilters,M=function(){return D("jet.fb.restrictions.filters",[a,c,m,v,w,S,j])},F=[],T=[];function B(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";F.length||(F=M().map((function(t){return new t})));var e=F.find((function(r){return t===r.getSlug()}));e&&(r=r.split(",").map((function(t){return t.trim()})),e.setProps(r),T.push(e))}const P=function(t){if(null===t||null==t||!t.length)return null;var r,e=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=A(t))){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}(t);try{for(e.s();!(r=e.n()).done;){var n=r.value,o=n.match(/^(\w+)\(([^()]+)\)/);null!==o?B(o[1],o[2]):B(n)}}catch(t){e.e(t)}finally{e.f()}var i,u=function(t){if(Array.isArray(t))return O(t)}(i=T)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||A(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return T=[],u};function C(){}C.prototype={getId:function(){throw new Error("You need to rewrite this method")},getResult:function(){throw new Error("You need to rewrite this method")}};const E=C;function R(){E.call(this),this.getId=function(){return"CurrentDate"},this.getResult=function(){return(new Date).getTime()}}R.prototype=Object.create(E.prototype);const H=R;var J={Milli_In_Sec:1e3,Sec_In_Min:60,Min_In_Hour:60,Hour_In_Day:24,Day_In_Month:30,Year_In_Day:365,Kb_In_Bytes:1024};J.Min_In_Sec=J.Sec_In_Min*J.Milli_In_Sec,J.Hour_In_Sec=J.Min_In_Hour*J.Min_In_Sec,J.Day_In_Sec=J.Hour_In_Day*J.Hour_In_Sec,J.Month_In_Sec=J.Day_In_Month*J.Day_In_Sec,J.Year_In_Sec=J.Year_In_Day*J.Day_In_Sec,J.Mb_In_Bytes=1024*J.Kb_In_Bytes,J.Gb_In_Bytes=1024*J.Mb_In_Bytes,J.Tb_In_Bytes=1024*J.Gb_In_Bytes;const Y=J;function k(){E.call(this),this.getId=function(){return"Min_In_Sec"},this.getResult=function(){return Y.Min_In_Sec}}k.prototype=Object.create(E.prototype);const U=k;function $(){E.call(this),this.getId=function(){return"Month_In_Sec"},this.getResult=function(){return Y.Month_In_Sec}}$.prototype=Object.create(E.prototype);const x=$;function N(){E.call(this),this.getId=function(){return"Hour_In_Sec"},this.getResult=function(){return Y.Hour_In_Sec}}N.prototype=Object.create(E.prototype);const G=N;function K(){E.call(this),this.getId=function(){return"Day_In_Sec"},this.getResult=function(){return Y.Day_In_Sec}}K.prototype=Object.create(E.prototype);const W=K;function Q(){E.call(this),this.getId=function(){return"Year_In_Sec"},this.getResult=function(){return Y.Year_In_Sec}}Q.prototype=Object.create(E.prototype);const q=Q;function z(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var L=wp.hooks.applyFilters,V=[];function X(t){V.length||(V=L("jet.fb.static.functions",[H,U,x,G,W,q]));var r,e=function(t,r){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,r){if(t){if("string"==typeof t)return z(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?z(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return u=t.done,t},e:function(t){a=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(a)throw i}}}}(V);try{for(e.s();!(r=e.n()).done;){var n=new(0,r.value);if(n.getId()===t)return n}}catch(t){e.e(t)}finally{e.f()}return!1}var Z,tt,rt;function et(t){return ut(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||ot(t)||nt()}function nt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ot(t,r){if(t){if("string"==typeof t)return it(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?it(t,r):void 0}}function it(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ut(t){if(Array.isArray(t))return t}var at=JetFormBuilderAbstract.InputData,lt=wp.hooks,ct=lt.applyFilters,st=lt.addFilter,ft=(null!==(Z=null===(tt=window)||void 0===tt||null===(rt=tt.JetFormBuilderMain)||void 0===rt?void 0:rt.filters)&&void 0!==Z?Z:{}).applyFilters,pt=void 0!==ft&&ft;function yt(t,r){var e,n;this.formula=t,this.parts=[],this.related=[],this.relatedAttrs=[],r instanceof at&&(this.input=r),this.observe(t,null!==(e=null===(n=this.input)||void 0===n?void 0:n.root)&&void 0!==e?e:r)}st("jet.fb.custom.formula.macro","jet-form-builder",(function(t,r,e){if(!r.includes("CT::"))return t;var n=X(r=r.replace("CT::",""));return!1===n?t:n.getResult()})),yt.prototype={formula:null,parts:[],related:[],relatedAttrs:[],input:null,setResult:function(){throw new Error("CalculatedFormula.setResult is not set!")},relatedCallback:function(t){return t.value.current},observe:function(t,e){var n=this;if(Array.isArray(t))t.forEach((function(t){n.observe(t,e)}));else{var o=t.split(/%(.*?)%/g);1!==o.length&&(this.parts=o.map((function(t){var o=et(t.split("|")),i=o[0],u=o.slice(1),a=i.match(/[\w\-:]+/g);if(!a)return t;var l=et(a),c=l[0],s=l.slice(1),f="this"!==c?e.getInput(c):n.input;if(!f&&!c.includes("::"))return t;var p=P(u);if(c.includes("::")){var y=ct("jet.fb.custom.formula.macro",!1,c,s,e,n);return!1===y?t:r(y,p)}if(n.related.includes(f.name)||(n.related.push(f.name),f.watch((function(){return n.setResult()}))),null==s||!s.length)return function(){return r(n.relatedCallback(f),p)};var h,d,m=(h=s,d=1,ut(h)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i=[],u=!0,a=!1;try{for(e=e.call(t);!(u=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);u=!0);}catch(t){a=!0,o=t}finally{try{u||null==e.return||e.return()}finally{if(a)throw o}}return i}}(h,d)||ot(h,d)||nt())[0];if(!f.attrs.hasOwnProperty(m))return t;var b=f.attrs[m];return n.relatedAttrs.includes(f.name+m)||(n.relatedAttrs.push(f.name+m),b.value.watch((function(){return n.setResult()}))),function(){return r(b.value.current,p)}})))}},calculateString:function(){var t=this;return this.parts.length?this.parts.map((function(r){var e;if("function"!=typeof r)return null!==(e=t.input)&&void 0!==e&&e.nodes&&!1!==pt?(r=ct("jet.fb.onCalculate.part",r,t),pt("forms/calculated-formula-before-value",r,jQuery(t.input.nodes[0]))):r;var n=r();return null===n||""===n?0:n})).join(""):this.formula},calculate:function(){if(!this.parts.length)return this.formula;var t=this.calculateString();return new Function("return "+t)()}};const ht=yt;var dt,mt,bt;function vt(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function gt(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?vt(Object(e),!0).forEach((function(r){wt(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):vt(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function wt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}window.JetFormBuilderAbstract=gt(gt({},null!==(dt=window.JetFormBuilderAbstract)&&void 0!==dt?dt:{}),{},{Filter:i,CalculatedFormula:ht,BaseInternalMacro:E}),window.JetFormBuilderFunctions=gt(gt({},null!==(mt=window.JetFormBuilderFunctions)&&void 0!==mt?mt:{}),{},{getFilters:P,applyFilters:r,toDate:f,toDateTime:y,toTime:p,getTimestamp:h}),window.JetFormBuilderConst=gt(gt({},null!==(bt=window.JetFormBuilderConst)&&void 0!==bt?bt:{}),Y)})();