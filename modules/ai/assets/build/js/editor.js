(()=>{"use strict";function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l,a,i=[],c=!0,u=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var r=wp.components,n=r.Modal,o=r.TextareaControl,l=r.Button,a=wp.element.useState,i=wp.i18n.__,c=wp.apiFetch,u=JetFormBuilderParser,m=u.parseHTMLtoBlocks,p=u.getFormInnerFields,s=["#fake-ai","Registration form with minimum inputs","Opt-in form with gender selector like radio","Quiz form with 5 questions with choices about math"];const f=function(t){var r=t.setShowModal,u=t.footer,f=void 0===u?function(){return"Here may be buttons"}:u,d=e(a(""),2),b=d[0],w=d[1],y=e(a(""),2),h=y[0],v=y[1],g=e(a(!1),2),j=g[0],E=g[1];return wp.element.createElement(n,{style:{width:"60vw"},onRequestClose:function(){return r(!1)},title:i("Generate Form with AI","jet-form-builder")},Boolean(h.length)?wp.element.createElement(React.Fragment,null,wp.element.createElement("div",{dangerouslySetInnerHTML:{__html:h},style:{padding:"2em 1em",backgroundColor:"#f6f7f7",marginBottom:"1em"}}),wp.element.createElement(f,{clearHTML:function(){return v("")},formHTML:h,prompt:b})):wp.element.createElement(React.Fragment,null,wp.element.createElement(o,{label:i("Describe the form you want","jet-form-builder"),value:b,onChange:w,help:i("Prompt example: Simple contact form","jet-form-builder")}),wp.element.createElement(l,{variant:"primary",isBusy:j,onClick:function(){E(!0),c({path:"/jet-form-builder/v1/ai/generate",method:"POST",data:{prompt:b}}).then((function(e){v(p(e.form)),console.group(i("JFB: Parsed blocks from generated HTML","jet-form-builder")),console.log(m(e.form)),console.groupEnd()})).catch((function(e){console.error(e)})).finally((function(){E(!1)}))}},i("Generate","jet-form-builder")),wp.element.createElement("h4",null,i("Tips to write good prompt:","jet-form-builder")),wp.element.createElement("ul",{style:{listStyle:"disc",paddingInlineStart:"1em"}},wp.element.createElement("li",null,i("Start with the main purpose of the form.","jet-form-builder")),wp.element.createElement("li",null,i("If you need some specific fields - describe \nthem also in prompt.","jet-form-builder")),wp.element.createElement("li",null,i("Better to use English language for \nthe prompt - AI understand it better than other","jet-form-builder"))),wp.element.createElement("h4",null,i("Examples of the good prompts:","jet-form-builder")),wp.element.createElement("ul",{style:{listStyle:"disc",paddingInlineStart:"1em"}},s.map((function(e){return wp.element.createElement("li",{key:e},wp.element.createElement(l,{onClick:function(){return w(e)},variant:"link"},e))})))))};function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}var b=wp.i18n.__,w=JetFormBuilderParser.parseHTMLtoBlocks,y=wp.components,h=y.Button,v=y.Flex,g=y.Popover,j=JetFBHooks,E=j.useTriggerPopover,S=j.usePattern;const O=function(e){var t=e.clearHTML,r=e.formHTML,n=E(),o=n.showPopover,l=n.setShowPopover,a=n.ref,i=n.popoverProps,c=S("ai"),u=c.insert,m=c.append,p=c.blocks;return wp.element.createElement(v,{justify:"flex-start"},wp.element.createElement(h,{ref:a,variant:"primary",onClick:function(){return p.length?l((function(e){return!e})):u({blocks:w(r)})}},b("Use this form","jet-form-builder")),wp.element.createElement(h,{variant:"secondary",onClick:t},b("Change generation prompt","jet-form-builder")),o&&wp.element.createElement(g,d({position:"top-start",noArrow:!1},i),wp.element.createElement("div",{style:{padding:"0.5em",width:"max-content"}},wp.element.createElement("span",null,b("I want to","jet-form-builder"))," ",wp.element.createElement(h,{isLink:!0,isDestructive:!0,onClick:function(){return u({blocks:w(r)})}},b("replace","jet-form-builder"))," / ",wp.element.createElement(h,{isLink:!0,onClick:function(){return m({blocks:w(r)})}},b("append","jet-form-builder"))," ",wp.element.createElement("span",null,b("form settings and blocks","jet-form-builder")))))};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=wp.components.Button,P=wp.element.useState,I=wp.i18n.__;function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=JetFBComponents.PatternInserterButton,B=wp.element.useState;const F=JSON.parse('{"name":"ai","title":"Generate via AI","icon":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 24 24\\" width=\\"36\\" height=\\"36\\" aria-hidden=\\"true\\" focusable=\\"false\\"><path fill-rule=\\"evenodd\\" d=\\"M7.25 16.437a6.5 6.5 0 1 1 9.5 0V16A2.75 2.75 0 0 0 14 13.25h-4A2.75 2.75 0 0 0 7.25 16v.437Zm1.5 1.193a6.47 6.47 0 0 0 3.25.87 6.47 6.47 0 0 0 3.25-.87V16c0-.69-.56-1.25-1.25-1.25h-4c-.69 0-1.25.56-1.25 1.25v1.63ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm10-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z\\" clip-rule=\\"evenodd\\"></path></svg>"}');function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){var n,o,l;n=e,o=t,l=r[t],(o=function(e){var t=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===T(t)?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[o]=l})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=wp.element.createRoot,H=wp.data,R=H.subscribe,D=H.dispatch,J=document.createElement("div");J.classList.add("jfb-generate-form-ai-wrapper"),_(J).render(wp.element.createElement((function(){var e,t,r=(e=P(!1),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l,a,i=[],c=!0,u=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],o=r[1];return wp.element.createElement(React.Fragment,null,wp.element.createElement(A,{icon:wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},wp.element.createElement("path",{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),onClick:function(){return o((function(e){return!e}))}},I("Generate Form with AI","jet-form-builder")),n&&wp.element.createElement(React.Fragment,null,wp.element.createElement(f,{setShowModal:o,footer:O})))}),null));var q=function(){var e=document.querySelector(".edit-post-header-toolbar");return!e||e.querySelector(".jfb-generate-form-ai-wrapper")||e.appendChild(J),null};wp.domReady((function(){R((function(){setTimeout(q,0)}))})),D("jet-forms/patterns").register(L(L({},F),{},{view:function(e){var t,r,n=e.pattern,o=(t=B(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,l,a,i=[],c=!0,u=!1;try{if(l=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=l.call(r)).done)&&(i.push(n.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],a=o[1];return wp.element.createElement(React.Fragment,null,wp.element.createElement("li",null,wp.element.createElement(M,{patternName:"ai",variant:"secondary",withPatternIcon:!0,iconSize:64,className:"block-editor-block-variation-picker__variation",onClick:function(){return a(!0)}}),wp.element.createElement("span",{className:"block-editor-block-variation-picker__variation-label"},n.title)),l&&wp.element.createElement(React.Fragment,null,wp.element.createElement(f,{setShowModal:a,footer:O})))}}))})();