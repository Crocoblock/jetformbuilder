(()=>{const{InputData:t}=JetFormBuilderAbstract,{ListingAddTemplateWatcher:e,ListingTemplateClick:n}=JetFormBuilderFunctions,{addAction:i,addFilter:s}=JetPlugins.hooks;function o(){t.call(this),this.isSupported=function(t){return"appointment"===t.dataset.field},this.addListeners=function(){const[t]=this.nodes;jQuery(t).on("change",(()=>{this.value.current=t.value}))},this.onObserve=function(){t.prototype.onObserve.call(this),this.callable=null,this.value.sanitize((t=>["{}","[]"].includes(t)?"":t))}}function r(){t.call(this),this.isSupported=function(t){return t.classList.contains("appointment-provider")},this.setNode=function(e){t.prototype.setNode.call(this,e),this.name=e.dataset?.field||e.name},this.checkIsRequired=function(){const[t]=this.nodes,e=JSON.parse(t.dataset.args);return e?.args_str?.includes("required")},this.addListeners=function(){const[t]=this.nodes;t.addEventListener("change",(({target:t})=>{this.value.current=t.value})),"SELECT"===t.nodeName&&t.addEventListener("blur",(()=>this.reportOnBlur())),this.addListingTemplateListener(),this.addServiceListener()},this.addServiceListener=function(){const[t]=this.nodes,e=JSON.parse(t.dataset.args);if(!e?.service?.field)return;const n=this.root.getInput(e.service.field);n&&n.watch((()=>{this.silenceSet(null)}))},this.addListingTemplateListener=function(){const[t]=this.nodes;"DIV"===t.nodeName&&(t.addEventListener("click",n),e(this))},this.onObserve=function(){t.prototype.onObserve.call(this),this.callable=null}}o.prototype=Object.create(t.prototype),r.prototype=Object.create(t.prototype),i("jet.fb.observe.before","jet-form-builder/appointment-compatibility",(function(t){const{rootNode:e}=t;for(const t of e.querySelectorAll(".jet-apb-calendar-wrapper")){const e=t.querySelector("input[data-field]");"appointment"===e.dataset.field&&(e.dataset.jfbSync=1)}for(const t of e.querySelectorAll(".field-type-appointment-provider .appointment-provider"))t.dataset.jfbSync=1})),s("jet.fb.inputs","jet-form-builder/appointment-field",(function(t){return[o,r,...t]}))})();